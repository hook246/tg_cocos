{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/invite/inviteView.ts"],"names":["_decorator","Color","Label","Node","UITransform","basePageView","GlobalData","ccclass","property","inviteView","copy_link","start","node","getComponent","ScrollView","scrollToBottom","scrollToTop","update","deltaTime","setInviteInfo","totalInviteNum","totalPoint","points","string","String","invite_count","progress_point","active","point_multi2","color","fontSize","setPosition","getPosition","x","y","progress_bar","width","point_multi3","point_multi4","point_multi5","setInviteUrl","invite_url","window","btoa","inviteCode","copyInviteLink","navigator","clipboard","writeText","then","copy_complete1","copy_complete2","scheduleOnce","catch","shareInviteToFriend","shareText","shareUrl","telegramShareUrl","encodeURIComponent","open"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAkBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;;AAC3CC,MAAAA,Y,iBAAAA,Y;;AACFC,MAAAA,U;;;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;4BAGjBS,U,WADZF,OAAO,CAAC,YAAD,C,UAELC,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACL,IAAD,C,UAGRK,QAAQ,CAACL,IAAD,C,WAGRK,QAAQ,CAACN,KAAD,C,WAGRM,QAAQ,CAACL,IAAD,C,WAGRK,QAAQ,CAACL,IAAD,C,WAGRK,QAAQ,CAACL,IAAD,C,2BAnCX,MACaM,UADb;AAAA;AAAA,wCAC6C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAqC3CC,SArC2C;AAAA;;AAuC3CC,QAAAA,KAAK,GAAG;AACN,eAAKC,IAAL,CAAUC,YAAV,CAAuBC,UAAvB,EAAmCC,cAAnC;AACA,eAAKH,IAAL,CAAUC,YAAV,CAAuBC,UAAvB,EAAmCE,WAAnC;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AAE5BC,QAAAA,aAAa,CAACC,cAAD,EAAyBC,UAAzB,EAA6C;AACxD;AACA,eAAKC,MAAL,CAAYC,MAAZ,GAAqBC,MAAM,CAACH,UAAD,CAA3B;AACA,eAAKI,YAAL,CAAkBF,MAAlB,GAA2BC,MAAM,CAACJ,cAAD,CAAjC;AACA,eAAKM,cAAL,CAAoBC,MAApB,GAA6B,IAA7B;;AACA,cAAGP,cAAc,GAAG,EAApB,EAAuB;AACnB;AACA,iBAAKM,cAAL,CAAoBC,MAApB,GAA6B,KAA7B;AACH,WAHD,MAGM,IAAGP,cAAc,GAAG,EAAjB,IAAuBA,cAAc,GAAG,EAA3C,EAA8C;AAChD,iBAAKQ,YAAL,CAAkBL,MAAlB,GAA2B,IAA3B;AACA,iBAAKK,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC2B,KAAtC,GAA8C,IAAI5B,KAAJ,CAAU,WAAV,CAA9C;AACA,iBAAK2B,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC4B,QAAtC,GAAiD,EAAjD;AACA,iBAAKF,YAAL,CAAkBhB,IAAlB,CAAuBmB,WAAvB,CAAmC,KAAKH,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCC,CAAxE,EAA2E,KAAKL,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCE,CAArC,GAAyC,EAApH;AACA,iBAAKR,cAAL,CAAoBK,WAApB,CAAgC,CAAC,OAAjC,EAA0C,MAA1C;AACA,iBAAKI,YAAL,CAAkBtB,YAAlB,CAA+BT,WAA/B,EAA4CgC,KAA5C,GAAoD,EAApD;AACH,WAPK,MAOA,IAAGhB,cAAc,GAAG,EAAjB,IAAuBA,cAAc,GAAG,GAA3C,EAA+C;AACjD,iBAAKiB,YAAL,CAAkBd,MAAlB,GAA2B,IAA3B;AACA,iBAAKK,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC2B,KAAtC,GAA8C,IAAI5B,KAAJ,CAAU,WAAV,CAA9C;AACA,iBAAK2B,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC4B,QAAtC,GAAiD,EAAjD;AACA,iBAAKF,YAAL,CAAkBhB,IAAlB,CAAuBmB,WAAvB,CAAmC,KAAKH,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCC,CAAxE,EAA2E,KAAKL,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCE,CAArC,GAAyC,EAApH;AACA,iBAAKR,cAAL,CAAoBK,WAApB,CAAgC,CAAC,OAAjC,EAA0C,MAA1C;AACA,iBAAKI,YAAL,CAAkBtB,YAAlB,CAA+BT,WAA/B,EAA4CgC,KAA5C,GAAoD,GAApD;AACH,WAPK,MAOA,IAAGhB,cAAc,GAAG,GAAjB,IAAwBA,cAAc,GAAG,GAA5C,EAAgD;AAClD,iBAAKkB,YAAL,CAAkBf,MAAlB,GAA2B,IAA3B;AACA,iBAAKK,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC2B,KAAtC,GAA8C,IAAI5B,KAAJ,CAAU,WAAV,CAA9C;AACA,iBAAK2B,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC4B,QAAtC,GAAiD,EAAjD;AACA,iBAAKF,YAAL,CAAkBhB,IAAlB,CAAuBmB,WAAvB,CAAmC,KAAKH,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCC,CAAxE,EAA2E,KAAKL,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCE,CAArC,GAAyC,EAApH;AACA,iBAAKR,cAAL,CAAoBK,WAApB,CAAgC,GAAhC,EAAqC,MAArC;AACA,iBAAKI,YAAL,CAAkBtB,YAAlB,CAA+BT,WAA/B,EAA4CgC,KAA5C,GAAoD,GAApD;AACH,WAPK,MAOA,IAAGhB,cAAc,GAAG,GAApB,EAAwB;AAC1B,iBAAKmB,YAAL,CAAkBhB,MAAlB,GAA2B,IAA3B;AACA,iBAAKK,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC2B,KAAtC,GAA8C,IAAI5B,KAAJ,CAAU,WAAV,CAA9C;AACA,iBAAK2B,YAAL,CAAkBf,YAAlB,CAA+BX,KAA/B,EAAsC4B,QAAtC,GAAiD,EAAjD;AACA,iBAAKF,YAAL,CAAkBhB,IAAlB,CAAuBmB,WAAvB,CAAmC,KAAKH,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCC,CAAxE,EAA2E,KAAKL,YAAL,CAAkBhB,IAAlB,CAAuBoB,WAAvB,GAAqCE,CAArC,GAAyC,EAApH;AACA,iBAAKR,cAAL,CAAoBK,WAApB,CAAgC,OAAhC,EAAyC,MAAzC;AACA,iBAAKI,YAAL,CAAkBtB,YAAlB,CAA+BT,WAA/B,EAA4CgC,KAA5C,GAAoD,GAApD;AACH;;AACD,eAAKI,YAAL;AACD;;AAEDA,QAAAA,YAAY,GAAG;AACb,eAAKC,UAAL,CAAgBlB,MAAhB,sEAA0FmB,MAAM,CAACC,IAAP,wBACtE;AAAA;AAAA,wCAAWC,UAD2D,SAA1F;AAGA,eAAKlC,SAAL,sEAAkFgC,MAAM,CAACC,IAAP,wBAC9D;AAAA;AAAA,wCAAWC,UADmD,SAAlF;AAGD;;AAEDC,QAAAA,cAAc,GAAG;AACfC,UAAAA,SAAS,CAACC,SAAV,CACGC,SADH,CACa,KAAKtC,SADlB,EAEGuC,IAFH,CAEQ,MAAM;AACV,iBAAKC,cAAL,CAAoBvB,MAApB,GAA6B,IAA7B;AACA,iBAAKwB,cAAL,CAAoBxB,MAApB,GAA6B,IAA7B;AACA,iBAAKyB,YAAL,CAAkB,MAAM;AACtB,mBAAKF,cAAL,CAAoBvB,MAApB,GAA6B,KAA7B;AACA,mBAAKwB,cAAL,CAAoBxB,MAApB,GAA6B,KAA7B;AACD,aAHD,EAGG,CAHH;AAID,WATH,EAUG0B,KAVH,CAUS,MAAM,CAAE,CAVjB;AAWD;;AAEDC,QAAAA,mBAAmB,GAAG;AACpB,cAAMC,SAAS,GAAG,+GAAlB;AACA,cAAMC,QAAQ,GAAG,KAAK9C,SAAtB,CAFoB,CAIpB;;AACA,cAAM+C,gBAAgB,mCAAiCC,kBAAkB,CACvEF,QADuE,CAAnD,cAEZE,kBAAkB,CAACH,SAAD,CAF5B,CALoB,CASpB;;AACAb,UAAAA,MAAM,CAACiB,IAAP,CAAYF,gBAAZ,EAA8B,QAA9B;AACD;;AAxH0C,O","sourcesContent":["import { _decorator, Color, Component, Label, Node, UITransform } from \"cc\";\nimport { basePageView } from \"../common/basePageView\";\nimport GlobalData from \"../home/GloabalClass\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"inviteView\")\nexport class inviteView extends basePageView {\n  @property(Label)\n  points: Label;\n\n  @property(Label)\n  invite_count: Label;\n\n  @property(Label)\n  point_multi2: Label;\n\n  @property(Label)\n  point_multi3: Label;\n\n  @property(Label)\n  point_multi4: Label;\n\n  @property(Label)\n  point_multi5: Label;\n\n  @property(Node)\n  progress_point: Node;\n\n  @property(Node)\n  progress_bar: Node;\n\n  @property(Label)\n  invite_url: Label;\n\n  @property(Node)\n  copy_complete1: Node;\n\n  @property(Node)\n  copy_complete2: Node;\n\n  @property(Node)\n  home: Node;\n\n  copy_link: string;\n\n  start() {\n    this.node.getComponent(ScrollView).scrollToBottom()\n    this.node.getComponent(ScrollView).scrollToTop()\n  }\n\n  update(deltaTime: number) {}\n\n  setInviteInfo(totalInviteNum: number, totalPoint: number) {\n    //1 10 50 100 500\n    this.points.string = String(totalPoint);\n    this.invite_count.string = String(totalInviteNum);\n    this.progress_point.active = true\n    if(totalInviteNum < 10){\n        //this.point_multi.string = \"1x\";\n        this.progress_point.active = false\n    }else if(totalInviteNum > 10 && totalInviteNum < 50){\n        this.point_multi2.string = \"2x\";\n        this.point_multi2.getComponent(Label).color = new Color('#000000DA')\n        this.point_multi2.getComponent(Label).fontSize = 40\n        this.point_multi2.node.setPosition(this.point_multi2.node.getPosition().x, this.point_multi2.node.getPosition().y + 20)\n        this.progress_point.setPosition(-304.808, 11.582)\n        this.progress_bar.getComponent(UITransform).width = 15\n    }else if(totalInviteNum > 50 && totalInviteNum < 100){\n        this.point_multi3.string = \"3x\";\n        this.point_multi2.getComponent(Label).color = new Color('#000000DA')\n        this.point_multi2.getComponent(Label).fontSize = 40\n        this.point_multi2.node.setPosition(this.point_multi2.node.getPosition().x, this.point_multi2.node.getPosition().y + 20)\n        this.progress_point.setPosition(-106.933, 11.582)\n        this.progress_bar.getComponent(UITransform).width = 210\n    }else if(totalInviteNum > 100 && totalInviteNum < 500){\n        this.point_multi4.string = \"4x\";\n        this.point_multi2.getComponent(Label).color = new Color('#000000DA')\n        this.point_multi2.getComponent(Label).fontSize = 40\n        this.point_multi2.node.setPosition(this.point_multi2.node.getPosition().x, this.point_multi2.node.getPosition().y + 20)\n        this.progress_point.setPosition(138, 11.582)\n        this.progress_bar.getComponent(UITransform).width = 450\n    }else if(totalInviteNum > 500){\n        this.point_multi5.string = \"5x\";\n        this.point_multi2.getComponent(Label).color = new Color('#000000DA')\n        this.point_multi2.getComponent(Label).fontSize = 40\n        this.point_multi2.node.setPosition(this.point_multi2.node.getPosition().x, this.point_multi2.node.getPosition().y + 20)\n        this.progress_point.setPosition(314.842, 11.582)\n        this.progress_bar.getComponent(UITransform).width = 620\n    }\n    this.setInviteUrl()\n  }\n\n  setInviteUrl() {\n    this.invite_url.string = `https://t.me/infinity_ground_bot/infinity_ground_app?startapp=${window.btoa(\n      `{\"inviteCode\":\"${GlobalData.inviteCode}\"}`\n    )}`;\n    this.copy_link = `https://t.me/infinity_ground_bot/infinity_ground_app?startapp=${window.btoa(\n      `{\"inviteCode\":\"${GlobalData.inviteCode}\"}`\n    )}`;\n  }\n\n  copyInviteLink() {\n    navigator.clipboard\n      .writeText(this.copy_link)\n      .then(() => {\n        this.copy_complete1.active = true;\n        this.copy_complete2.active = true;\n        this.scheduleOnce(() => {\n          this.copy_complete1.active = false;\n          this.copy_complete2.active = false;\n        }, 2);\n      })\n      .catch(() => {});\n  }\n\n  shareInviteToFriend() {\n    const shareText = \"üî•Join the biggest AI gaming platform on Telegram!\\r\\nüéÆExperience infinite fun of AI Games and Earn Rewards.\";\n    const shareUrl = this.copy_link;\n\n    // ÊûÑÂª∫ Telegram share URL\n    const telegramShareUrl = `https://t.me/share/url?url=${encodeURIComponent(\n      shareUrl\n    )}&text=${encodeURIComponent(shareText)}`;\n\n    // ‰ΩøÁî® window.open Êù•Âî§Ëµ∑ÂàÜ‰∫´\n    window.open(telegramShareUrl, \"_blank\");\n  }\n}\n"]}