{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/discover/discoverModel.ts"],"names":["_decorator","GlobalData","discoverView","basePageModel","ccclass","property","gamesUrls","paly_list","isProduction","click","discoverModel","game_list","play_list","start","view","getComponent","update","deltaTime","initData","getGames","getUgcs","initGameViews","reverse","initUgcViews","walletInfo","window","axios","post","type","headers","token","data","playCurrentGame","event","adId","current_game_info","id","current_ugc_info"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACFC,MAAAA,U;;AACEC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;2BAEjBM,S,GAAY;AACrBC,QAAAA,SAAS,EAAE;AAAA;AAAA,sCAAWC,YAAX,GAA0B,iDAA1B,GAA8E,oDADpE;AAErBC,QAAAA,KAAK,EAAG;AAAA;AAAA,sCAAWD,YAAX,GAAyB,kDAAzB,GAA8E;AAFjE,O;;+BAyBZE,a,WADZN,OAAO,CAAC,eAAD,C,gBAAR,MACaM,aADb;AAAA;AAAA,0CACiD;AAAA;AAAA;AAAA,eAE7CC,SAF6C;AAAA,eAc7CC,SAd6C;AAAA,eAe7CV,YAf6C;AAAA;;AAiB7CW,QAAAA,KAAK,GAAG;AACJ,eAAKX,YAAL,GAAoB,KAAKY,IAAL,CAAUC,YAAV;AAAA;AAAA,2CAApB;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEKC,QAAAA,QAAQ,GAAE;AAAA;;AAAA;AACZ,YAAA,KAAI,CAACP,SAAL,SAAuB,KAAI,CAACQ,QAAL,EAAvB;AACA,YAAA,KAAI,CAACP,SAAL,SAAuB,KAAI,CAACQ,OAAL,EAAvB;;AACA,YAAA,KAAI,CAAClB,YAAL,CAAkBmB,aAAlB,CAAgC,KAAI,CAACV,SAAL,CAAeW,OAAf,EAAhC;;AACA,YAAA,KAAI,CAACpB,YAAL,CAAkBqB,YAAlB,CAA+B,KAAI,CAACX,SAApC;AAJY;AAKf;;AAEKO,QAAAA,QAAQ,GAAE;AAAA;AAAA;;AACZ,gBAAMK,UAAU,SAASC,MAAM,CAACC,KAAP,CAAaC,IAAb,CACrBrB,SAAS,CAACC,SADW,EAEtB;AACCqB,cAAAA,IAAI,EAAE;AADP,aAFsB,EAIrB;AACEC,cAAAA,OAAO,EAAE;AACH,6CAA2B;AAAA;AAAA,8CAAWC;AADnC;AADX,aAJqB,CAAzB;AASE,mBAAON,UAAP,wCAAOA,UAAU,CAAEO,IAAnB,qBAAO,iBAAkBA,IAAzB;AAVU;AAWf;;AAEKX,QAAAA,OAAO,GAAE;AAAA;AAAA;;AACX,gBAAMI,UAAU,SAASC,MAAM,CAACC,KAAP,CAAaC,IAAb,CACrBrB,SAAS,CAACC,SADW,EAEtB;AACCqB,cAAAA,IAAI,EAAE;AADP,aAFsB,EAIrB;AACEC,cAAAA,OAAO,EAAE;AACH,6CAA2B;AAAA;AAAA,8CAAWC;AADnC;AADX,aAJqB,CAAzB;AASE,mBAAON,UAAP,yCAAOA,UAAU,CAAEO,IAAnB,qBAAO,kBAAkBA,IAAzB;AAVS;AAWd;;AAEKC,QAAAA,eAAe,CAACC,KAAD,EAAQL,IAAR,EAAqB;AAAA;;AAAA;AAAA;;AACtC,gBAAMJ,UAAU,SAASC,MAAM,CAACC,KAAP,CAAaC,IAAb,CACrBrB,SAAS,CAACG,KADW,EAEtB;AACCyB,cAAAA,IAAI,EAAEN,IAAI,KAAK,GAAT,GAAe,MAAI,CAAC1B,YAAL,CAAkBiC,iBAAlB,CAAoCC,EAAnD,GAAwD,MAAI,CAAClC,YAAL,CAAkBmC,gBAAlB,CAAmCD;AADlG,aAFsB,EAIrB;AACEP,cAAAA,OAAO,EAAE;AACH,6CAA2B;AAAA;AAAA,8CAAWC;AADnC;AADX,aAJqB,CAAzB;AASE,mBAAON,UAAP,yCAAOA,UAAU,CAAEO,IAAnB,qBAAO,kBAAkBA,IAAzB;AAVoC;AAWzC;;AArE4C,O","sourcesContent":["import { _decorator, Component, InstanceMaterialType, Node } from 'cc';\nimport GlobalData from '../home/GloabalClass';\nimport { discoverView } from './discoverView';\nimport { basePageModel } from '../common/basePageModel';\nconst { ccclass, property } = _decorator;\n\nexport const gamesUrls = {\n    paly_list: GlobalData.isProduction ? 'https://api.infinityg.ai/hall/api/discover/list' : 'https://api.infinitytest.cc/hall/api/discover/list',\n    click : GlobalData.isProduction ?'https://api.infinityg.ai/hall/api/discover/click' : 'https://api.infinitytest.cc/hall/api/discover/click'\n}\n\nexport interface GamesDataType{\n    code: string;\n    data: {\n        desc:string,\n        hot: number,\n        id: number,\n        icon: string,\n        name: string,\n        position: number,\n        sort: number,\n        tags: string[],\n        type: number,\n        url: string\n    }[]\n    message: string;\n}\n\n\n\n@ccclass('discoverModel')\nexport class discoverModel extends basePageModel {\n\n    game_list: {\n        desc:string,\n        hot: number,\n        id: number,\n        icon: string,\n        name: string,\n        position: number,\n        sort: number,\n        tags: string[],\n        type: number,\n        url: string\n    }[]\n    play_list: any\n    discoverView: discoverView\n\n    start() {\n        this.discoverView = this.view.getComponent(discoverView)\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    async initData(){\n        this.game_list = await this.getGames()\n        this.play_list = await this.getUgcs()\n        this.discoverView.initGameViews(this.game_list.reverse())\n        this.discoverView.initUgcViews(this.play_list)\n    }\n\n    async getGames(){\n        const walletInfo = await window.axios.post<GamesDataType>(\n            gamesUrls.paly_list\n          ,{\n            type: 1\n          },{\n              headers: { \n                    'Authorization': `Bearer ${GlobalData.token}`\n                }\n          });\n          return walletInfo?.data?.data;\n    }\n\n    async getUgcs(){\n        const walletInfo = await window.axios.post<GamesDataType>(\n            gamesUrls.paly_list\n          ,{\n            type: 2\n          },{\n              headers: { \n                    'Authorization': `Bearer ${GlobalData.token}`\n                }\n          });\n          return walletInfo?.data?.data;\n    }\n\n    async playCurrentGame(event, type: string){\n        const walletInfo = await window.axios.post<any>(\n            gamesUrls.click\n          ,{\n            adId: type === '1' ? this.discoverView.current_game_info.id : this.discoverView.current_ugc_info.id\n          },{\n              headers: { \n                    'Authorization': `Bearer ${GlobalData.token}`\n                }\n          });\n          return walletInfo?.data?.data;\n    }\n}\n\n"]}