{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/discover/discoverView.ts"],"names":["_decorator","instantiate","Node","Prefab","basePageView","UIScrollSelectHorizontal","ccclass","property","discoverView","shift_btns","currentGameScrollOffset","start","btn_shift_game","btn_shift_ugc","update","deltaTime","shiftCurrentPlayType","btn","data","forEach","node","getChildByName","active","currentTarget","game_part","ugc_part","initGameViews","gameList","initScrollPrefabs","initUgcViews","ugcList","list","father_node","hp","scroll_node","getComponent","scrollChildrenCount","length","scrollChildrenInfo","addChild","setPosition","play","index","currentPageClose"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  EventTouch,\n  instantiate,\n  Node,\n  Prefab,\n  ScrollView,\n  Sprite,\n  UITransform,\n  Vec2,\n} from \"cc\";\nimport { basePageView } from \"../common/basePageView\";\nimport WebUtils from \"../common/WebUtils\";\nimport { UIScrollSelectHorizontal } from \"./UIScrollSelectHorizontal\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"discoverView\")\nexport class discoverView extends basePageView {\n  @property(Node)\n  btn_shift_game: Node = null;\n\n  @property(Node)\n  btn_shift_ugc: Node = null;\n\n  @property(Node)\n  game_part: Node = null;\n\n  @property(Node)\n  ugc_part: Node = null;\n\n  @property(Prefab)\n  scroll_node: Prefab = null;\n\n  shift_btns: Node[] = [];\n\n  currentGameScrollOffset: any\n\n  start() {\n    this, (this.shift_btns = [this.btn_shift_game, this.btn_shift_ugc]);\n    // this.game_father_node.on(Node.EventType.TOUCH_START, (event) => {\n    //     this.currentGameScrollOffset = this.game_father_node.getComponent(ScrollView).getScrollOffset()\n    // });\n\n    // this.game_father_node.on(Node.EventType.TOUCH_END, (event: EventTouch) => {\n\n    //   const startPos = event.touch.getStartLocation();\n    //   const prePos = event.touch.getPreviousLocation();\n\n\n    //   let offset;\n    //   if (startPos.x > prePos.x) {\n    //     offset = -500;\n    //   } else {\n    //     offset = 500;\n    //   }\n      \n    //   const scroll = this.game_father_node.getComponent(ScrollView);\n    //   console.log('========',scroll.getScrollOffset().x,this.currentGameScrollOffset.x )\n    //   scroll.scrollToOffset(\n    //     new Vec2(\n    //       this.currentGameScrollOffset.x + 100,\n    //       0\n    //     ),\n    //     1,\n    //     true\n    //   );\n    //   this.currentGameScrollOffset.x = this.currentGameScrollOffset.x +100 \n\n    // });\n    \n  }\n\n  update(deltaTime: number) {}\n\n  shiftCurrentPlayType(btn: EventTouch, data: string) {\n    this.shift_btns.forEach((node) => {\n      node.getChildByName(\"selected\").active = false;\n      node.getChildByName(\"selected_lable\").active = false;\n      node.getChildByName(\"unselected_lable\").active = true;\n    });\n    btn.currentTarget.getChildByName(\"selected\").active = true;\n    btn.currentTarget.getChildByName(\"selected_lable\").active = true;\n    if (data === \"game\") {\n      this.game_part.active = true;\n      this.ugc_part.active = false;\n    } else {\n      this.game_part.active = false;\n      this.ugc_part.active = true;\n    }\n  }\n\n  initGameViews(\n    gameList: {\n      desc: string;\n      hot: number;\n      id: number;\n      icon: string;\n      name: string;\n      position: number;\n      sort: number;\n      tags: string[];\n      type: number;\n      url: string;\n    }[]\n  ) {\n    this.initScrollPrefabs(gameList, this.game_part)\n  }\n\n  initUgcViews(\n    ugcList: {\n      desc: string;\n      hot: number;\n      id: number;\n      icon: string;\n      name: string;\n      position: number;\n      sort: number;\n      tags: string[];\n      type: number;\n      url: string;\n    }[]\n  ) {\n    this.initScrollPrefabs(ugcList, this.ugc_part)\n  }\n\n  initScrollPrefabs(list:  {\n    desc: string;\n    hot: number;\n    id: number;\n    icon: string;\n    name: string;\n    position: number;\n    sort: number;\n    tags: string[];\n    type: number;\n    url: string;\n  }[], father_node: Node){\n    let hp = instantiate(this.scroll_node);\n    hp.getComponent(UIScrollSelectHorizontal).scrollChildrenCount = list.length\n    hp.getComponent(UIScrollSelectHorizontal).scrollChildrenInfo = list\n    father_node.addChild(hp);\n    hp.setPosition(0, 0);\n    list.forEach((play, index) => {\n\n    });\n  }\n\n  currentPageClose() {}\n}\n"]}