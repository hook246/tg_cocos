{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/profile/profileView.ts"],"names":["_decorator","EditBox","Label","Node","basePageView","GlobalData","WebUtils","ccclass","property","avatars","profileView","avatar","start","getRemoteImg","window","Telegram","WebApp","initDataUnsafe","user","photo_url","user_proto","user_name","string","username","tgId","id","update","deltaTime","showEditPage","edit_page","active","closeEditPage","resetBindUi","bindBtn","unbindBtn","twitterUserName","node","setTwitterInfo","taskData","data","editUserInfo","url","userInfo","axios","post","userName","headers","token","closeProfile","setPosition"],"mappings":"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","sourcesContent":["import { _decorator, Component, EditBox, Label, Node } from 'cc';\nimport { basePageModel } from '../common/basePageModel';\nimport { basePageView } from '../common/basePageView';\nimport GlobalData from '../home/GloabalClass';\nimport WebUtils from '../common/WebUtils';\nconst { ccclass, property } = _decorator;\n\nconst avatars =[\n    '',\n    '',\n    '',\n    '',\n    ''\n]\n\n@ccclass('profileView')\nexport class profileView extends basePageView {\n\n    @property(Node)\n    bindBtn: Node\n\n    @property(Node)\n    unbindBtn: Node\n\n    @property(Label)\n    twitterUserName: Label\n\n    @property(Label)\n    user_name: Label\n\n    @property(Label)\n    tgId: Label\n\n    @property(Node)\n    user_proto: Node\n\n    @property(Node)\n    home: Node\n\n    @property(Node)\n    edit_page: Node\n\n    @property(EditBox)\n    username: EditBox\n\n    avatar:string\n\n    start() {\n        WebUtils.getRemoteImg(window?.Telegram?.WebApp?.initDataUnsafe?.user?.photo_url, this.user_proto)\n        this.user_name.string = `${window?.Telegram?.WebApp?.initDataUnsafe?.user?.username}`\n        this.tgId.string = `${window?.Telegram?.WebApp?.initDataUnsafe?.user?.id}`\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    showEditPage(){\n        this.edit_page.active = true\n    }\n\n    closeEditPage(){\n        this.edit_page.active = false\n    }\n\n    resetBindUi(){\n        this.bindBtn.active = true\n        this.unbindBtn.active = false\n        this.twitterUserName.node.active = false\n    }\n\n    setTwitterInfo(){\n        if(GlobalData.taskData.data.data.twitterUserName){\n            this.bindBtn.active = false\n            this.unbindBtn.active = true\n            this.twitterUserName.node.active = true\n            this.twitterUserName.string = GlobalData.taskData.data.data.twitterUserName\n        }else{\n            this.bindBtn.active = true\n            this.unbindBtn.active = false\n            this.twitterUserName.node.active = false\n        }\n    }\n\n    async editUserInfo(){\n        const url = 'https://api.infinitytest.cc/api/v1/user/info/edit'\n        const userInfo = await window.axios.post<any>(\n            url\n          ,{\n            avatar: \"avatar\",\n            userName: this.user_name.string\n          \n          },{\n              headers: { \n                    'Authorization': `Bearer ${GlobalData.token}`\n                }\n          });\n    }\n\n    closeProfile(){\n        this.node.setPosition(-5000, 0)\n    }\n}\n\n"]}