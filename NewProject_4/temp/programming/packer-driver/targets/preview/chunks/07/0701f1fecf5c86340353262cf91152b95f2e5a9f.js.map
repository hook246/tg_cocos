{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/JumpTo.ts"],"names":["Node","Vec3","tween","easing","prototype","jump_to","targetPos","height","duration","callback","new_tween_postion","startPosY","jump_y","y_tween","to","onStart","my","position","y","onUpdate","set","onComplete","union","jump_offset_y","offsetY","offset_y_tween","r","oy","quadOut","jump_x","x","x_tween","parallel"],"mappings":"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","sourcesContent":["import {Node,Vec3,tween,easing} from 'cc';\n/**\n * 实现接口方法\n */\nNode.prototype.jump_to= function(targetPos:Vec3, height:number,duration:number,callback:Function){\n    const new_tween_postion = new Vec3();\n\n    //跳高\n    let startPosY = 0;\n    this.jump_y = 0;\n    const y_tween = tween().to(duration/2,{jump_y:height},{\n        onStart: (my:Node)=>{\n            startPosY = my.position.y;\n            my.jump_y = 0;\n        },\n        onUpdate: (my:Node)=>{\n            new_tween_postion.set(my.position);\n            new_tween_postion.y = startPosY+my.jump_y;\n            my.position = new_tween_postion;\n        },\n        onComplete:(my:Node)=>{\n            my.jump_y = 0;\n        },easing:'quadOut',\n    }).to(duration/2,{jump_y:height},{\n        onStart: (my:Node)=>{\n            startPosY = my.position.y;\n        },\n        onUpdate: (my:Node)=>{\n            new_tween_postion.set(my.position);\n            new_tween_postion.y = startPosY- my.jump_y;\n            my.position = new_tween_postion;\n        },\n        onComplete:(my:Node)=>{\n            my.jump_y = 0;\n        },easing:'quadIn',\n    }).union();\n\n    //修正y落点\n    this.jump_offset_y = 0;\n    let offsetY = 0;\n    const offset_y_tween = tween().to(duration,{jump_offset_y:targetPos.y-this.position.y},{\n        onStart:(my:Node) =>{\n            offsetY = targetPos.y - my.position.y;\n            my.jump_offset_y = 0;\n        },\n        onUpdate:(my:Node,r)=>{\n            const oy = easing.quadOut(r)*offsetY;\n            new_tween_postion.y += oy;\n            my.position = new_tween_postion;\n        },\n        onComplete:(my:Node)=>{\n            my.jump_offset_y = 0;\n        }\n    })\n\n    //跳远\n    this.jump_x = this.position.x;\n    const x_tween = tween().to(duration,{jump_x:targetPos.x},{\n        onUpdate:(my:Node)=>{\n            new_tween_postion.set(my.position);;\n            new_tween_postion.x = my.jump_x;\n            my.position = new_tween_postion;\n            callback?.();\n        },\n        onComplete:(my:Node)=>{\n            my.jump_x = my.position.x;\n        }\n    });\n\n    return tween(this).parallel(y_tween,offset_y_tween,x_tween);\n}"]}