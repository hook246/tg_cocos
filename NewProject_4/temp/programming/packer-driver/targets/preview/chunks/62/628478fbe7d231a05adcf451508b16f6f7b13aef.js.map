{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/invite/inviteModel.ts"],"names":["_decorator","GlobalData","basePageModel","inviteView","ccclass","property","taskUrls","SearchTask","ClaimReward","CompleteTask","CheckIn","inviteModel","invitePage","inviteCode","start","view","getComponent","update","deltaTime","initData","getTaskList","taskList","window","axios","post","page","headers","token","setInviteInfo","data","totalInviteNum","gamePoint","error","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACFC,MAAAA,U;;AAEEC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;0BAEjBM,Q,GAAW;AACtBC,QAAAA,UAAU,EAAE,8CADU;AAEtBC,QAAAA,WAAW,EAAE,+CAFS;AAGtBC,QAAAA,YAAY,EAAE,kDAHQ;AAItBC,QAAAA,OAAO,EAAE;AAJa,O;;6BA4CXC,W,WADZP,OAAO,CAAC,aAAD,C,gBAAR,MACaO,WADb;AAAA;AAAA,0CAC+C;AAAA;AAAA;AAAA,eAC3CC,UAD2C;AAAA,eAE3CC,UAF2C;AAAA;;AAG7CC,QAAAA,KAAK,GAAG;AACN,eAAKF,UAAL,GAAkB,KAAKG,IAAL,CAAUC,YAAV;AAAA;AAAA,uCAAlB;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AAEtBC,QAAAA,QAAQ,GAAE;AAAA;;AAAA;AACd,YAAA,KAAI,CAACN,UAAL,GAAkB;AAAA;AAAA,0CAAWA,UAA7B;AACA,kBAAM,KAAI,CAACO,WAAL,EAAN;AAFc;AAGf;;AAEKA,QAAAA,WAAW,GAAG;AAAA;;AAAA;AAClB,gBAAI;AACF,kBAAMC,QAAQ,SAASC,MAAM,CAACC,KAAP,CAAaC,IAAb,CACrBlB,QAAQ,CAACC,UADY,EAErB;AACIkB,gBAAAA,IAAI,EAAE;AADV,eAFqB,EAInB;AACEC,gBAAAA,OAAO,EAAE;AACH,+CAA2B;AAAA;AAAA,gDAAWC;AADnC;AADX,eAJmB,CAAvB;;AAUA,cAAA,MAAI,CAACf,UAAL,CAAgBgB,aAAhB,CAA8BP,QAAQ,CAACQ,IAAT,CAAcA,IAAd,CAAmBC,cAAjD,EAAiET,QAAQ,CAACQ,IAAT,CAAcA,IAAd,CAAmBE,SAApF;;AACA,qBAAOV,QAAQ,CAACQ,IAAT,CAAcA,IAArB;AACD,aAbD,CAaE,OAAOG,KAAP,EAAc;AACdC,cAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AAhBiB;AAiBnB;;AA/B4C,O","sourcesContent":["import { _decorator, Component, Node } from \"cc\";\nimport GlobalData from \"../home/GloabalClass\";\nimport { basePageView } from \"../common/basePageView\";\nimport { basePageModel } from \"../common/basePageModel\";\nimport { inviteView } from \"./inviteView\";\nconst { ccclass, property } = _decorator;\n\nexport const taskUrls = {\n  SearchTask: \"https://api.infinitytest.cc/api/v1/task/list\",\n  ClaimReward: \"https://api.infinitytest.cc/api/v1/task/claim\",\n  CompleteTask: \"https://api.infinitytest.cc/api/v1/task/complete\",\n  CheckIn: \"https://api.infinitytest.cc/api/v1/task/checkIn\",\n};\n\nexport interface taskListResponseType {\n  code: string;\n  data: {\n    checkInList: {\n      checkInNo: string;\n      date: string;\n      point: number;\n      status: number;\n    }[];\n    gamePoint: number;\n    taskModelResponses: {\n      taskList: {\n        buttonText: string;\n        icon: string;\n        remark: string;\n        showMsg: string;\n        taskDesc: string;\n        taskId: number;\n        taskLink: string;\n        taskName: string;\n        taskReward: number;\n        taskType: number;\n        value1: number;\n        value2: string;\n      }[];\n      taskModelId: number;\n      taskModelName: string;\n      taskType: string;\n    }[];\n    totalInviteNum: number;\n    totalPoint: number;\n    twitterUserName: string;\n  };\n  message: string;\n}\n\n@ccclass(\"inviteModel\")\nexport class inviteModel extends basePageModel {\n    invitePage: inviteView\n    inviteCode: any;\n  start() {\n    this.invitePage = this.view.getComponent(inviteView)\n  }\n\n  update(deltaTime: number) {}\n\n  async initData(){\n    this.inviteCode = GlobalData.inviteCode\n    await this.getTaskList()\n  }\n\n  async getTaskList() {\n    try {\n      const taskList = await window.axios.post<taskListResponseType>(\n        taskUrls.SearchTask,\n        {\n            page: 'GAME_LOBBY',\n        },{\n            headers: { \n                  'Authorization': `Bearer ${GlobalData.token}`\n            }\n        }\n      );\n      this.invitePage.setInviteInfo(taskList.data.data.totalInviteNum, taskList.data.data.gamePoint)\n      return taskList.data.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n"]}