{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/earn/earnView.ts"],"names":["_decorator","Button","instantiate","Label","Node","Prefab","ProgressBar","basePageView","GlobalData","ccclass","property","ChangeType","twitterTaskId","taskUrls","SearchTask","ClaimReward","CompleteTask","CheckIn","earnView","type","taskInfo","start","completeTask","id","bindData","window","axios","post","taskId","headers","token","checkIn","index","config","method","url","Authorization","then","taskList","data","code","changeCheckTaskState","catch","error","console","log","claimReward","initTaskNode","info","checkInList","forEach","task","setCheckTaskNode","check_btns","on","EventType","CLICK","now","Date","year","getFullYear","month","getMonth","day","getDate","date","clickCheckTaskNode","Telegram","WebApp","showAlert","message","taskModelResponses","taskListPart","taskModelName","initSocialTaskNode","initDailyTaskNode","taskResponseList","child","social_prefab","updateSocialTaskUiByState","INIT","status","indexOf","taskData","twitterUserName","openLink","taskLink","tryInstantView","changeDailyOrSocialTaskState","social_parent","addChild","daily_prefab","updateDailyTaskUiByState","discoverPage","setPosition","node","daily_parent","getChildByName","getComponent","string","String","point","active","taskReward","taskDesc","value","update","deltaTime"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Button,\n  Component,\n  EventHandler,\n  instantiate,\n  Label,\n  Node,\n  Prefab,\n  ProgressBar,\n} from \"cc\";\nimport { basePageView } from \"../common/basePageView\";\nimport { taskListResponseType } from \"../invite/inviteModel\";\nimport GlobalData from \"../home/GloabalClass\";\nconst { ccclass, property } = _decorator;\n\nexport enum ChangeType {\n  INIT = 0,\n  CLICK = 1,\n}\n\nexport const twitterTaskId = [9, 10, 11, 12];\n\nexport interface TaskData {\n  buttonText: string;\n  icon: string;\n  remark: string;\n  showMsg: string;\n  taskDesc: string;\n  taskId: number;\n  taskLink: string;\n  taskName: string;\n  taskReward: number;\n  taskType: number;\n  value1: number;\n  value2: string;\n  status: number;\n}\n\nexport interface TaskDataList {\n  taskResponseList: {\n    buttonText: string;\n    icon: string;\n    remark: string;\n    showMsg: string;\n    taskDesc: string;\n    taskId: number;\n    taskLink: string;\n    taskName: string;\n    taskReward: number;\n    taskType: number;\n    value1: number;\n    value2: string;\n    status: number;\n  }[];\n  taskModelId: number;\n  taskModelName: string;\n  taskType: string;\n}\n\nexport const taskUrls = {\n  SearchTask: \"https://api.infinitytest.cc/api/v1/task/list\",\n  ClaimReward: \"https://api.infinitytest.cc/api/v1/task/claim\",\n  CompleteTask: \"https://api.infinitytest.cc/api/v1/task/complete\",\n  CheckIn: \"https://api.infinitytest.cc/api/v1/task/checkIn\",\n};\n\n@ccclass(\"earnView\")\nexport class earnView extends basePageView {\n  @property(Prefab)\n  social_prefab: Prefab;\n\n  @property(Prefab)\n  daily_prefab: Prefab;\n\n  @property(Node)\n  social_parent: Node;\n\n  @property(Node)\n  daily_parent: Node;\n\n  @property(Node)\n  discoverPage: Node;\n\n  @property({ type: [Node] })\n  check_btns: Node[] = [];\n  taskInfo: taskListResponseType;\n\n  start() {}\n\n  async completeTask(id: number) {\n    const bindData = await window.axios.post<any>(\n        taskUrls.CompleteTask,\n        {\n            taskId: id,\n        },{\n          headers: { \n                'Authorization': `Bearer ${GlobalData.token}`\n          }\n      })\n  }\n\n  async checkIn(index: number) {\n    var config = {\n      method: \"post\",\n      url: taskUrls.CheckIn,\n      headers: {\n        \"User-Agent\": \"Apifox/1.0.0 (https://apifox.com)\",\n        Authorization: `Bearer ${GlobalData.token}`,\n      },\n    };\n\n    await (window.axios as any)(config)\n      .then((taskList: taskListResponseType) => {\n        if (taskList.data.code === \"90000\") {\n          this.changeCheckTaskState(index);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  async claimReward(id: number) {\n    const bindData = await window.axios.post<any>(\n        taskUrls.ClaimReward,\n        {\n            taskId: id,\n        },{\n          headers: { \n                'Authorization': `Bearer ${GlobalData.token}`\n          }\n      })\n  }\n\n  initTaskNode(info: taskListResponseType) {\n    this.taskInfo = info;\n    info.data.data.checkInList.forEach((task, index) => {\n      this.setCheckTaskNode(task, index);\n      this.check_btns[index].on(\n        Button.EventType.CLICK,\n        async () => {\n            const now = new Date();\n\n            const year = now.getFullYear();\n            const month = now.getMonth() + 1 < 10 ? `0${now.getMonth() + 1}` : now.getMonth() + 1;\n            const day = now.getDate() < 10 ? `0${now.getDate()}` : now.getDate();\n          \n            const date = `${year}-${month}-${day}`;\n            if(date === task.date){\n                await this.clickCheckTaskNode(index);\n            }else{\n                window.Telegram.WebApp.showAlert(\n                    {\n                      message: \"Can only sign in today!\",\n                    },\n                    () => {\n                      // 用户点击关闭按钮后调用的回调函数\n                      console.log(\"\");\n                    }\n                  );\n            }\n\n        },\n        this\n      );\n    });\n\n    info.data.data.taskModelResponses.forEach((taskListPart) => {\n      if (taskListPart.taskModelName === \"Social tasks\") {\n        this.initSocialTaskNode(taskListPart as unknown as TaskDataList);\n      }\n      if (taskListPart.taskModelName === \"Daily tasks\") {\n        this.initDailyTaskNode(taskListPart as unknown as TaskDataList);\n      }\n    });\n  }\n\n  initSocialTaskNode(info: TaskDataList) {\n    info.taskResponseList.forEach((task, index) => {\n      const child = instantiate(this.social_prefab);\n      this.updateSocialTaskUiByState(task, child, ChangeType.INIT);\n      child.on(\n        Button.EventType.CLICK,\n        async () => {\n          if (\n            this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n              index\n            ].status === 3\n          ) {\n            return;\n          }\n          if (\n            !(\n              twitterTaskId.indexOf(\n                this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n                  index\n                ].taskId\n              ) && GlobalData.taskData.data.data.twitterUserName\n            )\n          ) {\n            window.Telegram.WebApp.showAlert(\n              {\n                message: \"please bind twitter!\",\n              },\n              () => {\n                // 用户点击关闭按钮后调用的回调函数\n                console.log(\"警告框已关闭\");\n              }\n            );\n            return;\n          }\n          if (\n            this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n              index\n            ].status === 1\n          ) {\n            window.Telegram.WebApp.openLink(task.taskLink, {\n              tryInstantView: true,\n            });\n            await this.completeTask(task.taskId);\n            this.changeDailyOrSocialTaskState(\n              2,\n              this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n                index\n              ],\n              index,\n              child\n            );\n          }\n          if (\n            this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n              index\n            ].status === 2\n          ) {\n            await this.claimReward(task.taskId);\n            this.changeDailyOrSocialTaskState(\n              2,\n              this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n                index\n              ],\n              index,\n              child\n            );\n          }\n        },\n        this\n      );\n\n      this.social_parent.addChild(child);\n    });\n  }\n\n  initDailyTaskNode(info: TaskDataList) {\n    info.taskResponseList.forEach((task, index) => {\n      const child = instantiate(this.daily_prefab);\n      this.updateDailyTaskUiByState(task, child, ChangeType.INIT);\n      child.on(\n        Button.EventType.CLICK,\n        async () => {\n          if (\n            this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n              index\n            ].status === 3\n          ) {\n            return;\n          }\n          if (\n            this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n              index\n            ].status === 1\n          ) {\n            //跳转大厅\n            this.discoverPage.setPosition(0, 0);\n            this.node.setPosition(0, 0);\n            await this.completeTask(task.taskId);\n            this.changeDailyOrSocialTaskState(\n              3,\n              this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n                index\n              ],\n              index,\n              child\n            );\n          }\n          if (\n            this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n              index\n            ].status === 2\n          ) {\n            await this.claimReward(task.taskId);\n            this.changeDailyOrSocialTaskState(\n              3,\n              this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n                index\n              ],\n              index,\n              child\n            );\n          }\n        },\n        this\n      );\n\n      this.daily_parent.addChild(child);\n    });\n  }\n\n  async clickCheckTaskNode(index: number) {\n    await this.checkIn(index);\n  }\n\n  setCheckTaskNode(index, info) {\n    if (info.status === 1) {\n      this.changeCheckTaskState(index);\n    }\n  }\n\n  changeCheckTaskState(index: number) {\n    this.check_btns[index].getChildByName(\"count\").getComponent(Label).string =\n      String(GlobalData.taskData.data.data.checkInList[index].point);\n    this.check_btns[index].getChildByName(\"uncoplete\").active = false;\n    this.check_btns[index].getChildByName(\"complete\").active = true;\n    this.check_btns[index].getChildByName(\"check\").active = true;\n    this.check_btns[index].getChildByName(\"dollar\").active = false;\n  }\n\n  changeDailyOrSocialTaskState(type, info: TaskData, index, node: Node) {\n    if (type === 2) {\n      this.taskInfo.data.data.taskModelResponses[0].taskResponseList[\n        index\n      ].status = info.status;\n      this.updateSocialTaskUiByState(info, node, ChangeType.CLICK);\n      //改变ui\n    }\n    if (type === 3) {\n      this.taskInfo.data.data.taskModelResponses[1].taskResponseList[\n        index\n      ].status = info.status;\n      //改变ui\n      this.updateDailyTaskUiByState(info, node, ChangeType.CLICK);\n    }\n  }\n\n  updateDailyTaskUiByState(info: TaskData, node, type: ChangeType) {\n    node.getChildByName(\"count\").getComponent(Label).string = info.taskReward;\n    node.getChildByName(\"desc\").getComponent(Label).string = info.taskDesc;\n    //node.getChildByName('ProgressBar').getComponent(ProgressBar).value = info\n\n    if (type === ChangeType.INIT) {\n      if (info.status === 1) {\n        node.getChildByName(\"un_complete_bg\").active = true;\n        node.getChildByName(\"complete_bg\").active = false;\n        node.getChildByName(\"dollar\").active = true;\n        node.getChildByName(\"count\").active = true;\n        node.getChildByName(\"check\").active = false;\n        node.getChildByName(\"ProgressBar\").getComponent(ProgressBar).value = 0;\n      }\n\n      if (info.status === 2) {\n        node.getChildByName(\"un_complete_bg\").active = false;\n        node.getChildByName(\"complete_bg\").active = true;\n        node.getChildByName(\"dollar\").active = true;\n        node.getChildByName(\"count\").active = true;\n        node.getChildByName(\"check\").active = false;\n        node\n          .getChildByName(\"ProgressBar\")\n          .getComponent(ProgressBar).value = 1;\n      }\n      if (info.status === 3) {\n        node.getChildByName(\"un_complete_bg\").active = false;\n        node.getChildByName(\"complete_bg\").active = true;\n        node.getChildByName(\"dollar\").active = false;\n        node.getChildByName(\"count\").active = false;\n        node.getChildByName(\"check\").active = true;\n        node\n          .getChildByName(\"ProgressBar\")\n          .getComponent(ProgressBar).value = 1;\n      }\n    } else {\n      if (info.status === 1) {\n        node.getChildByName(\"un_complete_bg\").active = false;\n        node.getChildByName(\"complete_bg\").active = true;\n        node.getChildByName(\"dollar\").active = true;\n        node.getChildByName(\"count\").active = true;\n        node.getChildByName(\"check\").active = false;\n        node\n          .getChildByName(\"ProgressBar\")\n          .getComponent(ProgressBar).value = 1;\n      }\n      if (info.status === 2) {\n        node.getChildByName(\"un_complete_bg\").active = false;\n        node.getChildByName(\"complete_bg\").active = true;\n        node.getChildByName(\"dollar\").active = false;\n        node.getChildByName(\"count\").active = false;\n        node.getChildByName(\"check\").active = true;\n        node\n          .getChildByName(\"ProgressBar\")\n          .getComponent(ProgressBar).value = 1;\n      }\n    }\n  }\n\n  updateSocialTaskUiByState(info: TaskData, node, type: ChangeType) {\n    node.getChildByName(\"count\").getComponent(Label).string = info.taskReward;\n    node.getChildByName(\"desc\").getComponent(Label).string = info.taskDesc;\n    if (type == ChangeType.INIT) {\n      if (info.status === 1) {\n        node.getChildByName(\"uncomplete\").active = true;\n        node.getChildByName(\"complete\").active = false;\n        node.getChildByName(\"dollar\").active = true;\n        node.getChildByName(\"count\").active = true;\n        node.getChildByName(\"check\").active = false;\n      }\n      if (info.status === 2) {\n        node.getChildByName(\"uncomplete\").active = false;\n        node.getChildByName(\"complete\").active = true;\n        node.getChildByName(\"dollar\").active = true;\n        node.getChildByName(\"count\").active = true;\n        node.getChildByName(\"check\").active = false;\n      }\n      if (info.status === 3) {\n        node.getChildByName(\"uncomplete\").active = false;\n        node.getChildByName(\"complete\").active = true;\n        node.getChildByName(\"dollar\").active = false;\n        node.getChildByName(\"count\").active = false;\n        node.getChildByName(\"check\").active = true;\n      }\n    } else {\n      if (info.status === 1) {\n        node.getChildByName(\"uncomplete\").active = false;\n        node.getChildByName(\"complete\").active = true;\n        node.getChildByName(\"dollar\").active = true;\n        node.getChildByName(\"count\").active = true;\n        node.getChildByName(\"check\").active = false;\n      }\n      if (info.status === 2) {\n        node.getChildByName(\"uncomplete\").active = false;\n        node.getChildByName(\"complete\").active = true;\n        node.getChildByName(\"dollar\").active = false;\n        node.getChildByName(\"count\").active = false;\n        node.getChildByName(\"check\").active = true;\n      }\n    }\n  }\n\n  update(deltaTime: number) {}\n}\n"]}