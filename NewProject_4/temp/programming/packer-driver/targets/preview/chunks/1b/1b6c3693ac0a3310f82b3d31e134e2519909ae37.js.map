{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/invite/inviteModel.ts"],"names":["_decorator","GlobalData","basePageModel","inviteView","homeView","ccclass","property","taskUrls","SearchTask","isProduction","ClaimReward","CompleteTask","CheckIn","inviteModel","invitePage","earnPage","inviteCode","start","view","getComponent","update","deltaTime","initData","getTaskList","config","method","url","headers","token","params","page","taskList","window","axios","setInviteInfo","data","totalInviteNum","invitePoint","home","game_point","string","String","totalPoint","taskData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACFC,MAAAA,U;;AAEEC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;0BAEjBO,Q,GAAW;AACtBC,QAAAA,UAAU,EAAE;AAAA;AAAA,sCAAWC,YAAX,GAA0B,uCAA1B,GAAoE,8CAD1D;AAEtBC,QAAAA,WAAW,EAAE;AAAA;AAAA,sCAAWD,YAAX,GAA0B,wCAA1B,GAAqE,+CAF5D;AAGtBE,QAAAA,YAAY,EAAE;AAAA;AAAA,sCAAWF,YAAX,GAA0B,2CAA1B,GAAwE,kDAHhE;AAItBG,QAAAA,OAAO,EAAE;AAAA;AAAA,sCAAWH,YAAX,GAA0B,0CAA1B,GAAuE;AAJ1D,O;;6BAiDXI,W,WADZR,OAAO,CAAC,aAAD,C,gBAAR,MACaQ,WADb;AAAA;AAAA,0CAC+C;AAAA;AAAA;AAAA,eAC3CC,UAD2C;AAAA,eAE3CC,QAF2C;AAAA,eAG3CC,UAH2C;AAAA;;AAI7CC,QAAAA,KAAK,GAAG;AACN,eAAKH,UAAL,GAAkB,KAAKI,IAAL,CAAUC,YAAV;AAAA;AAAA,uCAAlB;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AAEtBC,QAAAA,QAAQ,GAAE;AAAA;;AAAA;AACd,YAAA,KAAI,CAACN,UAAL,GAAkB;AAAA;AAAA,0CAAWA,UAA7B;AACA,kBAAM,KAAI,CAACO,WAAL,EAAN;AAFc;AAGf;;AAEKA,QAAAA,WAAW,GAAG;AAAA;;AAAA;AACd,gBAAIC,MAAM,GAAG;AACTC,cAAAA,MAAM,EAAE,MADC;AAETC,cAAAA,GAAG,EAAE;AAAA;AAAA,4CAAWjB,YAAX,GAA0B,uCAA1B,GAAoE,8CAFhE;AAGTkB,cAAAA,OAAO,EAAE;AACP,8BAAc,mCADP;AAEP,6CAA2B;AAAA;AAAA,8CAAWC;AAF/B,eAHA;AAOTC,cAAAA,MAAM,EAAE;AACNC,gBAAAA,IAAI,EAAE,YADA,CAEN;;AAFM;AAPC,aAAb;AAaA,gBAAMC,QAA8B,SAAUC,MAAM,CAACC,KAAR,CAAsBT,MAAtB,CAA7C;;AACA,YAAA,MAAI,CAACV,UAAL,CAAgBoB,aAAhB,CAA8BH,QAAQ,CAACI,IAAT,CAAcA,IAAd,CAAmBC,cAAjD,EAAiEL,QAAQ,CAACI,IAAT,CAAcA,IAAd,CAAmBE,WAApF;;AACA,YAAA,MAAI,CAACvB,UAAL,CAAgBwB,IAAhB,CAAqBnB,YAArB;AAAA;AAAA,sCAA4CoB,UAA5C,CAAuDC,MAAvD,GAAgEC,MAAM,CAClEV,QAAQ,CAACI,IAAT,CAAcA,IAAd,CAAmBO,UAD+C,CAAtE;AAGA;AAAA;AAAA,0CAAWC,QAAX,GAAsBZ,QAAtB,CAnBc,CAoBd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCkB;AAwCnB;;AAvD4C,O","sourcesContent":["import { _decorator, Component, Node } from \"cc\";\nimport GlobalData from \"../home/GloabalClass\";\nimport { basePageView } from \"../common/basePageView\";\nimport { basePageModel } from \"../common/basePageModel\";\nimport { inviteView } from \"./inviteView\";\nimport { earnView } from \"../earn/earnView\";\nimport { homeView } from \"../home/homeView\";\nconst { ccclass, property } = _decorator;\n\nexport const taskUrls = {\n  SearchTask: GlobalData.isProduction ? \"https://infinityg.ai/api/v1/task/list\" : \"https://api.infinitytest.cc/api/v1/task/list\",\n  ClaimReward: GlobalData.isProduction ? \"https://infinityg.ai/api/v1/task/claim\" : \"https://api.infinitytest.cc/api/v1/task/claim\",\n  CompleteTask: GlobalData.isProduction ? \"https://infinityg.ai/api/v1/task/complete\" : \"https://api.infinitytest.cc/api/v1/task/complete\",\n  CheckIn: GlobalData.isProduction ? \"https://infinityg.ai/api/v1/task/checkIn\" : \"https://api.infinitytest.cc/api/v1/task/checkIn\",\n};\n\nexport interface taskListResponseType {\n    \n        data:{\n            code: string;\n            data: {\n              checkInList: {\n                checkInNo: string;\n                date: string;\n                point: number;\n                status: number;\n              }[];\n              gamePoint: number;\n              taskModelResponses: {\n                taskResponseList: {\n                  buttonText: string;\n                  icon: string;\n                  remark: string;\n                  showMsg: string;\n                  taskDesc: string;\n                  taskId: number;\n                  taskLink: string;\n                  taskName: string;\n                  taskReward: number;\n                  taskType: number;\n                  value1: number;\n                  value2: string;\n                  status: number\n                }[];\n                taskModelId: number;\n                taskModelName: string;\n                taskType: string;\n              }[];\n              totalInviteNum: number;\n              totalPoint: number;\n              twitterUserName: string;\n              invitePoint: number\n            };\n            message: string;\n        }\n}\n\n@ccclass(\"inviteModel\")\nexport class inviteModel extends basePageModel {\n    invitePage: inviteView\n    earnPage: earnView\n    inviteCode: any;\n  start() {\n    this.invitePage = this.view.getComponent(inviteView)\n  }\n\n  update(deltaTime: number) {}\n\n  async initData(){\n    this.inviteCode = GlobalData.inviteCode\n    await this.getTaskList()\n  }\n\n  async getTaskList() {\n        var config = {\n            method: 'post',\n            url: GlobalData.isProduction ? 'https://infinityg.ai/api/v1/task/list' : 'https://api.infinitytest.cc/api/v1/task/list',\n            headers: { \n              'User-Agent': 'Apifox/1.0.0 (https://apifox.com)', \n              'Authorization': `Bearer ${GlobalData.token}`\n            },\n            params: {\n              page: 'GAME_LOBBY',\n              // 添加更多参数\n            }\n          };\n        \n        const taskList: taskListResponseType = await (window.axios as any)(config)\n        this.invitePage.setInviteInfo(taskList.data.data.totalInviteNum, taskList.data.data.invitePoint)\n        this.invitePage.home.getComponent(homeView).game_point.string = String(\n            taskList.data.data.totalPoint\n          );\n        GlobalData.taskData = taskList\n        // .then(function (taskList: taskListResponseType) {\n        //    this.invitePage.setInviteInfo(taskList.data.totalInviteNum, taskList.data.gamePoint)\n        //    GlobalData.taskData = taskList\n        //    cb(taskList)\n        // })\n        // .catch(function (error) {\n        //    console.log(error);\n        // });\n\n    //   const taskList = await window.axios.post<taskListResponseType>(\n    //     taskUrls.SearchTask,\n    //     {\n    //         page: 'GAME_LOBBY',\n    //     },{\n    //         headers: { \n    //               'Authorization': `Bearer ${GlobalData.token}`\n    //         }\n    //     }\n    //   );\n\n  }\n}\n"]}