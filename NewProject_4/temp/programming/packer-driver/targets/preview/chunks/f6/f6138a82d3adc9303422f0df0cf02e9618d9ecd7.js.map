{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/profile/profileModel.ts"],"names":["_decorator","basePageModel","GlobalData","profileView","ccclass","property","profileModel","start","view","getComponent","update","deltaTime","unBindTwitter","unbindTwitterUrl","bindData","window","axios","post","headers","token","error","console","log","resetBindUi","bindTwitter","twitterOauthUrl","Telegram","WebApp","openLink","tryInstantView","closeProfile","initData","setTwitterInfo"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,a,iBAAAA,a;;AACFC,MAAAA,U;;AACEC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;8BAGjBM,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb;AAAA;AAAA,0CACgD;AAAA;AAAA;AAAA,eAC5CH,WAD4C;AAAA;;AAI5CI,QAAAA,KAAK,GAAG;AACJ,eAAKJ,WAAL,GAAmB,KAAKK,IAAL,CAAUC,YAAV;AAAA;AAAA,yCAAnB;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEKC,QAAAA,aAAa,GAAE;AAAA;;AAAA;AACjB,gBAAMC,gBAAgB,GAAG,yDAAzB;;AACA,gBAAI;AACA;AACA,kBAAMC,QAAQ,SAASC,MAAM,CAACC,KAAP,CAAaC,IAAb,CACnBJ,gBADmB,EAErB,EAFqB,EAInB;AACAK,gBAAAA,OAAO,EAAE;AACH,+CAA2B;AAAA;AAAA,gDAAWC;AADnC;AADT,eAJmB,CAAvB;AASH,aAXD,CAWE,OAAOC,KAAP,EAAc;AACdC,cAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;;AACD,YAAA,KAAI,CAACjB,WAAL,CAAiBoB,WAAjB;AAhBiB;AAiBpB;;AAEDC,QAAAA,WAAW,GAAE;AACT,cAAMC,eAAe,yCAAuC;AAAA;AAAA,wCAAWN,KAAvE;AACAJ,UAAAA,MAAM,CAACW,QAAP,CAAgBC,MAAhB,CAAuBC,QAAvB,MAAmCH,eAAnC,EAAsD;AAAEI,YAAAA,cAAc,EAAE;AAAlB,WAAtD;AACA,eAAK1B,WAAL,CAAiB2B,YAAjB;AACH;;AAEDC,QAAAA,QAAQ,GAAE;AACN,eAAK5B,WAAL,CAAiB6B,cAAjB;AACH;;AAvC2C,O","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\nimport { basePageModel } from '../common/basePageModel';\nimport GlobalData from '../home/GloabalClass';\nimport { profileView } from './profileView';\nconst { ccclass, property } = _decorator;\n\n@ccclass('profileModel')\nexport class profileModel extends basePageModel {\n    profileView: profileView\n\n\n    start() {\n        this.profileView = this.view.getComponent(profileView)\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    async unBindTwitter(){\n        const unbindTwitterUrl = 'https://api.infinitytest.cc/api/v1/oauth/unboundTwitter'\n        try {\n            //登录成功\n            const bindData = await window.axios.post<any>(\n                unbindTwitterUrl,\n              {\n\n              },{\n                headers: { \n                      'Authorization': `Bearer ${GlobalData.token}`\n                }\n            })\n        } catch (error) {\n          console.log(error);\n        }\n        this.profileView.resetBindUi()\n    }\n\n    bindTwitter(){\n        const twitterOauthUrl = `https://www.infinitytest.cc?tgId=${GlobalData.token}`\n        window.Telegram.WebApp.openLink(`${twitterOauthUrl}`, { tryInstantView: true });\n        this.profileView.closeProfile()\n    }\n\n    initData(){\n        this.profileView.setTwitterInfo()\n    }\n}\n\n"]}