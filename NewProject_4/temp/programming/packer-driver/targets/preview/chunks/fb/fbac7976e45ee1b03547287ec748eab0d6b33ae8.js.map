{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/SoundCtl.ts"],"names":["_decorator","Component","AudioClip","AudioSource","ccclass","property","SoundCtl","type","play_call_back","start","update","deltaTime","play_start","as","node","getComponent","clip","jump_start","play","stop","jump_loop","loop","scheduleOnce","play_stop","unschedule","play_score","score","playOneShot","fail","score_1","score_more"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;;;;;;;;OAC3C;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;AAE9B;AACA;AACA;AACA;AACA;;0BAEaM,Q,WADZF,OAAO,CAAC,UAAD,C,UAGHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,UAGRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,UAGRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,UAGRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,UAGRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,UAGRG,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEL;AAAR,OAAD,C,2BAlBb,MACaI,QADb,SAC8BL,SAD9B,CACwC;AAAA;AAAA;;AACpC;AADoC;;AAIpC;AAJoC;;AAOpC;AAPoC;;AAUpC;AAVoC;;AAapC;AAboC;;AAgBpC;AAhBoC;;AAmBpC;AAnBoC,eAoBpCO,cApBoC,GAoBT,IApBS;AAAA;;AAsBpCC,QAAAA,KAAK,GAAG,CAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;AACD;AACJ;AACA;;;AACIC,QAAAA,UAAU,GAAG;AACT,cAAIC,EAAE,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBZ,WAAvB,CAAT;AACAU,UAAAA,EAAE,CAACG,IAAH,GAAU,KAAKC,UAAf;AACAJ,UAAAA,EAAE,CAACK,IAAH;;AACA,eAAKV,cAAL,GAAsB,MAAM;AACxBK,YAAAA,EAAE,CAACM,IAAH;AACAN,YAAAA,EAAE,CAACG,IAAH,GAAU,KAAKI,SAAf;AACAP,YAAAA,EAAE,CAACK,IAAH;AACAL,YAAAA,EAAE,CAACQ,IAAH,GAAU,IAAV;AACH,WALD;;AAMA,eAAKC,YAAL,CAAkB,KAAKd,cAAvB,EAAuC,CAAvC;AACH;AACD;AACJ;AACA;;;AACIe,QAAAA,SAAS,GAAG;AAAA;;AACR,wCAAKT,IAAL,CAAUC,YAAV,CAAuBZ,WAAvB,4CAAqCgB,IAArC;;AACA,cAAI,KAAKX,cAAT,EAAyB;AACrB,iBAAKgB,UAAL,CAAgB,KAAKhB,cAArB;AACH;AACJ;AAED;AACJ;AACA;AACA;;;AACIiB,QAAAA,UAAU,CAACC,KAAD,EAAgB;AACtB,cAAIb,EAAE,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBZ,WAAvB,CAAT;;AACA,kBAAQuB,KAAR;AACI,iBAAK,CAAC,CAAN;AACA,iBAAK,CAAL;AACIb,cAAAA,EAAE,CAACc,WAAH,CAAe,KAAKC,IAApB;AACA;;AACJ,iBAAK,CAAL;AACIf,cAAAA,EAAE,CAACc,WAAH,CAAe,KAAKE,OAApB;AACA;;AACJ;AACIhB,cAAAA,EAAE,CAACc,WAAH,CAAe,KAAKG,UAApB;AACA;AAVR;AAYH;;AAxEmC,O;;;;;iBAGZ,I;;;;;;;iBAGD,I;;;;;;;iBAGL,I;;;;;;;iBAGG,I;;;;;;;iBAGG,I;;;;;;;iBAGP,I","sourcesContent":["import { _decorator, Component, Node, AudioClip, AudioSource } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * 声音,脚本,挂载到canvas\n * @author 一朵毛山\n * Construct \n */\n@ccclass('SoundCtl')\nexport class SoundCtl extends Component {\n    //跳跃声音,开始\n    @property({ type: AudioClip })\n    jump_start: AudioClip = null;\n    //跳跃声音,循环\n    @property({ type: AudioClip })\n    jump_loop: AudioClip = null;\n    //失败声音\n    @property({ type: AudioClip })\n    fail: AudioClip = null;\n    //得分1\n    @property({ type: AudioClip })\n    score_1: AudioClip = null;\n    //得分>=2\n    @property({ type: AudioClip })\n    score_more: AudioClip = null;\n    //弹出,没用到这个\n    @property({ type: AudioClip })\n    pop: AudioClip = null;\n    //定时器的回调函数\n    play_call_back: Function = null;\n\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n\n    }\n    /**\n     * 播放触控声音\n     */\n    play_start() {\n        let as = this.node.getComponent(AudioSource);\n        as.clip = this.jump_start;\n        as.play();\n        this.play_call_back = () => {\n            as.stop();\n            as.clip = this.jump_loop;\n            as.play();\n            as.loop = true;\n        }\n        this.scheduleOnce(this.play_call_back, 2);\n    }\n    /**\n     * 停止播放触控声音\n     */\n    play_stop() {\n        this.node.getComponent(AudioSource)?.stop();\n        if (this.play_call_back) {\n            this.unschedule(this.play_call_back);\n        }\n    }\n\n    /**\n     * 根据得分播放声音\n     * @param score \n     */\n    play_score(score: number) {\n        let as = this.node.getComponent(AudioSource);\n        switch (score) {\n            case -1:\n            case 0:\n                as.playOneShot(this.fail);\n                break;\n            case 1:\n                as.playOneShot(this.score_1);\n                break;\n            default:\n                as.playOneShot(this.score_more);\n                break;\n        }\n    }\n\n}\n\n"]}