{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/discover/discoverView.ts"],"names":["_decorator","instantiate","Node","ScrollView","UITransform","Vec2","basePageView","WebUtils","ccclass","property","discoverView","shift_btns","start","btn_shift_game","btn_shift_ugc","game_father_node","on","EventType","TOUCH_CANCEL","event","startPos","touch","getStartLocation","prePos","getPreviousLocation","scroll","parent","getComponent","offset","x","scrollToOffset","getScrollOffset","y","update","deltaTime","shiftCurrentPlayType","btn","data","forEach","node","getChildByName","active","currentTarget","game_part","ugc_part","initGameViews","gameList","game","index","width","length","game_point","game_instance","getRemoteImg","icon","addChild","setPosition","initUgcViews","ugcList","ugc","guc_father_node","ugc_instance","currentPageClose"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  EventTouch,\n  instantiate,\n  Node,\n  ScrollView,\n  Sprite,\n  UITransform,\n  Vec2,\n} from \"cc\";\nimport { basePageView } from \"../common/basePageView\";\nimport WebUtils from \"../common/WebUtils\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"discoverView\")\nexport class discoverView extends basePageView {\n  @property(Node)\n  btn_shift_game: Node = null;\n\n  @property(Node)\n  btn_shift_ugc: Node = null;\n\n  @property(Node)\n  game_part: Node = null;\n\n  @property(Node)\n  ugc_part: Node = null;\n\n  @property(Node)\n  game_instance: Node = null;\n\n  @property(Node)\n  ugc_instance: Node = null;\n\n  @property(Node)\n  game_father_node: Node = null;\n\n  @property(Node)\n  guc_father_node: Node = null;\n\n  shift_btns: Node[] = [];\n\n  start() {\n    this, (this.shift_btns = [this.btn_shift_game, this.btn_shift_ugc]);\n    // this.game_father_node.on(Node.EventType.TOUCH_START, (event) => {\n\n    // });\n\n    this.game_father_node.on(Node.EventType.TOUCH_CANCEL, (event: EventTouch) => {\n      const startPos = event.touch.getStartLocation();\n      const prePos = event.touch.getPreviousLocation();\n      const scroll = this.game_father_node.parent.getComponent(ScrollView);\n      let offset;\n      if (startPos.x > prePos.x) {\n        offset = 500;\n      } else {\n        offset = -500;\n      }\n      scroll.scrollToOffset(\n        new Vec2(\n          scroll.getScrollOffset().x + offset,\n          scroll.getScrollOffset().y\n        ),\n        1,\n        true\n      );\n    });\n  }\n\n  update(deltaTime: number) {}\n\n  shiftCurrentPlayType(btn: EventTouch, data: string) {\n    this.shift_btns.forEach((node) => {\n      node.getChildByName(\"selected\").active = false;\n      node.getChildByName(\"selected_lable\").active = false;\n      node.getChildByName(\"unselected_lable\").active = true;\n    });\n    btn.currentTarget.getChildByName(\"selected\").active = true;\n    btn.currentTarget.getChildByName(\"selected_lable\").active = true;\n    if (data === \"game\") {\n      this.game_part.active = true;\n      this.ugc_part.active = false;\n    } else {\n      this.game_part.active = false;\n      this.ugc_part.active = true;\n    }\n  }\n\n  initGameViews(\n    gameList: {\n      desc: string;\n      hot: number;\n      id: number;\n      icon: string;\n      name: string;\n      position: number;\n      sort: number;\n      tags: string[];\n      type: number;\n      url: string;\n    }[]\n  ) {\n    gameList.forEach((game, index) => {\n      this.game_father_node.getComponent(UITransform).width =\n        gameList.length * 500 + 500;\n      const game_point = instantiate(this.game_instance);\n      game_point.active = true;\n      WebUtils.getRemoteImg(game.icon, game_point.getChildByName(\"img\"));\n      this.game_father_node.addChild(game_point);\n      game_point.setPosition(-1000 + index * 500, 0);\n    });\n  }\n\n  initUgcViews(\n    ugcList: {\n      desc: string;\n      hot: number;\n      id: number;\n      icon: string;\n      name: string;\n      position: number;\n      sort: number;\n      tags: string[];\n      type: number;\n      url: string;\n    }[]\n  ) {\n    ugcList.forEach((ugc, index) => {\n      this.guc_father_node.getComponent(UITransform).width =\n        ugcList.length * 500 + 500;\n      const game_point = instantiate(this.ugc_instance);\n      game_point.active = true;\n      WebUtils.getRemoteImg(ugc.icon, game_point.getChildByName(\"img\"));\n      this.guc_father_node.addChild(game_point);\n      game_point.setPosition(index * 500, 0);\n    });\n  }\n\n  currentPageClose() {}\n}\n"]}