{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/earn/earnView.ts"],"names":["_decorator","Button","instantiate","Label","Node","Prefab","basePageView","GlobalData","ccclass","property","twitterTaskId","taskUrls","SearchTask","ClaimReward","CompleteTask","CheckIn","earnView","type","taskInfo","start","completeTask","id","config","method","url","headers","Authorization","token","params","taskId","window","axios","then","catch","error","console","log","checkIn","index","taskList","data","code","changeCheckTaskState","claimReward","initTaskNode","info","checkInList","forEach","task","setCheckTaskNode","check_btns","on","EventType","CLICK","clickCheckTaskNode","taskModelResponses","taskListPart","taskModelName","initSocialTaskNode","initDailyTaskNode","taskResponseList","child","social_prefab","updateSocialTaskUiByState","status","Telegram","WebApp","openLink","taskLink","tryInstantView","changeDailyOrSocialTaskState","social_parent","addChild","daily_prefab","updateDailyTaskUiByState","discoverPage","setPosition","node","daily_parent","getChildByName","getComponent","string","String","taskData","point","active","taskReward","taskDesc","update","deltaTime"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Button,\n  Component,\n  EventHandler,\n  instantiate,\n  Label,\n  Node,\n  Prefab,\n  ProgressBar,\n} from \"cc\";\nimport { basePageView } from \"../common/basePageView\";\nimport { taskListResponseType } from \"../invite/inviteModel\";\nimport GlobalData from \"../home/GloabalClass\";\nconst { ccclass, property } = _decorator;\n\nexport const twitterTaskId = []\n\nexport interface TaskData{\n    buttonText: string;\n    icon: string;\n    remark: string;\n    showMsg: string;\n    taskDesc: string;\n    taskId: number;\n    taskLink: string;\n    taskName: string;\n    taskReward: number;\n    taskType: number;\n    value1: number;\n    value2: string;\n    status: number\n}\n\nexport interface TaskDataList {\n    taskResponseList: {\n    buttonText: string;\n    icon: string;\n    remark: string;\n    showMsg: string;\n    taskDesc: string;\n    taskId: number;\n    taskLink: string;\n    taskName: string;\n    taskReward: number;\n    taskType: number;\n    value1: number;\n    value2: string;\n    status: number\n  }[];\n  taskModelId: number;\n  taskModelName: string;\n  taskType: string;\n}\n\nexport const taskUrls = {\n  SearchTask: \"https://api.infinitytest.cc/api/v1/task/list\",\n  ClaimReward: \"https://api.infinitytest.cc/api/v1/task/claim\",\n  CompleteTask: \"https://api.infinitytest.cc/api/v1/task/complete\",\n  CheckIn: \"https://api.infinitytest.cc/api/v1/task/checkIn\",\n};\n\n@ccclass(\"earnView\")\nexport class earnView extends basePageView {\n  @property(Prefab)\n  social_prefab: Prefab;\n\n  @property(Prefab)\n  daily_prefab: Prefab;\n\n  @property(Node)\n  social_parent: Node;\n\n  @property(Node)\n  daily_parent: Node;\n\n  @property(Node)\n  discoverPage: Node;\n\n  @property({ type: [Node] })\n  check_btns: Node[] = [];\n  taskInfo: taskListResponseType;\n\n  start() {}\n\n  async completeTask(id: number) {\n    var config = {\n      method: \"post\",\n      url: taskUrls.CompleteTask,\n      headers: {\n        \"User-Agent\": \"Apifox/1.0.0 (https://apifox.com)\",\n        Authorization: `Bearer ${GlobalData.token}`,\n      },\n      params: {\n        taskId: id,\n        // 添加更多参数\n      },\n    };\n\n    await (window.axios as any)(config)\n      .then(() => {\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  async checkIn(index: number) {\n    var config = {\n      method: \"post\",\n      url: taskUrls.CheckIn,\n      headers: {\n        \"User-Agent\": \"Apifox/1.0.0 (https://apifox.com)\",\n        Authorization: `Bearer ${GlobalData.token}`,\n      },\n    };\n\n    await (window.axios as any)(config)\n      .then((taskList: taskListResponseType) => {\n        if (taskList.data.code === \"90000\") {\n          this.changeCheckTaskState(index);\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  async claimReward(id: number) {\n    var config = {\n      method: \"post\",\n      url: taskUrls.ClaimReward,\n      headers: {\n        \"User-Agent\": \"Apifox/1.0.0 (https://apifox.com)\",\n        Authorization: `Bearer ${GlobalData.token}`,\n      },\n      params: {\n        taskId: id,\n        // 添加更多参数\n      },\n    };\n\n    await (window.axios as any)(config)\n      .then((taskList: taskListResponseType) => {\n\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  initTaskNode(info: taskListResponseType) {\n    this.taskInfo = info;\n    info.data.data.checkInList.forEach((task, index) => {\n      this.setCheckTaskNode(task, index);\n      this.check_btns[index].on(\n        Button.EventType.CLICK,\n        async () => {\n          await this.clickCheckTaskNode(index);\n        },\n        this\n      );\n    });\n\n    info.data.data.taskModelResponses.forEach((taskListPart) => {\n      if (taskListPart.taskModelName === \"Social tasks\") {\n        this.initSocialTaskNode(taskListPart as unknown as TaskDataList);\n      }\n      if (taskListPart.taskModelName === \"Daily tasks\") {\n        this.initDailyTaskNode(taskListPart as unknown as TaskDataList);\n      }\n    });\n  }\n\n  initSocialTaskNode(info: TaskDataList) {\n    info.taskResponseList.forEach((task, index) => {\n      const child = instantiate(this.social_prefab);\n      this.updateSocialTaskUiByState(task, child)\n      child.on(Button.EventType.CLICK, async () => {\n        if(this.taskInfo.data.data.taskModelResponses[0].taskList[index].status === 3){\n            return\n        }\n        // if(!(twitterTaskId.indexOf(this.taskInfo.data.taskModelResponses[0].taskList[index].taskId) && GlobalData.taskData.data.twitterUserName)){\n        //     return\n        // }\n        if(this.taskInfo.data.data.taskModelResponses[0].taskList[index].status === 1){\n            window.Telegram.WebApp.openLink(task.taskLink, { tryInstantView: true });\n            await this.completeTask(task.taskId)\n            this.changeDailyOrSocialTaskState(2,this.taskInfo.data.data.taskModelResponses[0].taskList[index],index, child)\n        }\n        if(this.taskInfo.data.data.taskModelResponses[0].taskList[index].status === 2){\n            await this.claimReward(task.taskId)\n            this.changeDailyOrSocialTaskState(2,this.taskInfo.data.data.taskModelResponses[0].taskList[index],index, child)\n        }\n      }, this);\n\n      this.social_parent.addChild(child);\n    });\n  }\n\n  initDailyTaskNode(info: TaskDataList) {\n    info.taskResponseList.forEach((task, index) => {\n      const child = instantiate(this.daily_prefab);\n      this.updateDailyTaskUiByState(task, child)\n      child.on(Button.EventType.CLICK, async () => {\n        if(this.taskInfo.data.data.taskModelResponses[0].taskList[index].status === 3){\n            return\n        }\n        if(this.taskInfo.data.data.taskModelResponses[0].taskList[index].status === 1){\n            //跳转大厅\n            this.discoverPage.setPosition(0, 0)\n            this.node.setPosition(0,0)\n            await this.completeTask(task.taskId)\n            this.changeDailyOrSocialTaskState(3,this.taskInfo.data.data.taskModelResponses[0].taskList[index],index,child)\n        }\n        if(this.taskInfo.data.data.taskModelResponses[0].taskList[index].status === 2){\n            await this.claimReward(task.taskId)\n            this.changeDailyOrSocialTaskState(3,this.taskInfo.data.data.taskModelResponses[0].taskList[index],index,child)\n        }\n      }, this);\n\n      this.daily_parent.addChild(child);\n    });\n  }\n\n  async clickCheckTaskNode(index: number) {\n    await this.checkIn(index);\n  }\n\n  setCheckTaskNode(index, info) {\n    if(info.status === 1){\n        this.changeCheckTaskState(index)\n    }\n  }\n\n  changeCheckTaskState(index: number) {\n    this.check_btns[index].getChildByName('count').getComponent(Label).string = String(GlobalData.taskData.data.data.checkInList[index].point)\n    this.check_btns[index].getChildByName('uncoplete').active = false\n    this.check_btns[index].getChildByName('complete').active = true\n    this.check_btns[index].getChildByName('check').active = true\n    this.check_btns[index].getChildByName('dollar').active = false\n  }\n\n  changeDailyOrSocialTaskState(type, info: TaskData, index, node: Node) {\n    if (type === 2) {\n        this.taskInfo.data.data.taskModelResponses[0].taskList[index].status = info.status \n        this.updateSocialTaskUiByState(info, node)       \n        //改变ui\n    }\n    if (type === 3) {\n        this.taskInfo.data.data.taskModelResponses[1].taskList[index].status = info.status\n                //改变ui\n        this.updateDailyTaskUiByState(info, node)  \n    }\n\n\n  }\n\n  updateDailyTaskUiByState(info: TaskData, node) {\n    node.getChildByName('count').getComponent(Label).string = info.taskReward\n    node.getChildByName('desc').getComponent(Label).string = info.taskDesc\n    //node.getChildByName('ProgressBar').getComponent(ProgressBar).value = info\n    if(info.status === 1){\n        node.getChildByName('un_complete_bg').active = true\n        node.getChildByName('complete_bg').active = false\n        node.getChildByName('dollar').active = true\n        node.getChildByName('count').active = true\n        node.getChildByName('check').active = false\n        //node.getChildByName('desc')\n    }\n    if(info.status === 2){\n        node.getChildByName('un_complete_bg').active = false\n        node.getChildByName('complete_bg').active = true\n        node.getChildByName('dollar').active = true\n        node.getChildByName('count').active = true\n        node.getChildByName('check').active = false\n    }\n    if(info.status === 3){\n        node.getChildByName('un_complete_bg').active = false\n        node.getChildByName('complete_bg').active = true\n        node.getChildByName('dollar').active = false\n        node.getChildByName('count').active = false\n        node.getChildByName('check').active = true\n    }\n  }\n\n  updateSocialTaskUiByState(info: TaskData, node) {\n    node.getChildByName('count').getComponent(Label).string = info.taskReward\n    node.getChildByName('desc').getComponent(Label).string = info.taskDesc\n    if(info.status === 1){\n        node.getChildByName('uncomplete').active = true\n        node.getChildByName('complete').active = false\n        node.getChildByName('dollar').active = true\n        node.getChildByName('count').active = true\n        node.getChildByName('check').active = false\n        //node.getChildByName('desc')\n    }\n    if(info.status === 2){\n        node.getChildByName('uncomplete').active = false\n        node.getChildByName('complete').active = true\n        node.getChildByName('dollar').active = true\n        node.getChildByName('count').active = true\n        node.getChildByName('check').active = false\n    }\n    if(info.status === 3){\n        node.getChildByName('uncomplete').active = false\n        node.getChildByName('complete').active = true\n        node.getChildByName('dollar').active = false\n        node.getChildByName('count').active = false\n        node.getChildByName('check').active = true\n    }\n  }\n\n  update(deltaTime: number) {}\n}\n"]}