{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/invite/inviteModel.ts"],"names":["_decorator","GlobalData","basePageModel","inviteView","ccclass","property","taskUrls","SearchTask","ClaimReward","CompleteTask","CheckIn","inviteModel","invitePage","earnPage","inviteCode","start","view","getComponent","update","deltaTime","initData","getTaskList","config","method","url","headers","token","params","page","taskList","window","axios","setInviteInfo","data","totalInviteNum","gamePoint","taskData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACFC,MAAAA,U;;AAEEC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;0BAEjBM,Q,GAAW;AACtBC,QAAAA,UAAU,EAAE,8CADU;AAEtBC,QAAAA,WAAW,EAAE,+CAFS;AAGtBC,QAAAA,YAAY,EAAE,kDAHQ;AAItBC,QAAAA,OAAO,EAAE;AAJa,O;;6BAgDXC,W,WADZP,OAAO,CAAC,aAAD,C,gBAAR,MACaO,WADb;AAAA;AAAA,0CAC+C;AAAA;AAAA;AAAA,eAC3CC,UAD2C;AAAA,eAE3CC,QAF2C;AAAA,eAG3CC,UAH2C;AAAA;;AAI7CC,QAAAA,KAAK,GAAG;AACN,eAAKH,UAAL,GAAkB,KAAKI,IAAL,CAAUC,YAAV;AAAA;AAAA,uCAAlB;AACD;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AAEd,cAARC,QAAQ,GAAE;AACd,eAAKN,UAAL,GAAkB;AAAA;AAAA,wCAAWA,UAA7B;AACA,gBAAM,KAAKO,WAAL,EAAN;AACD;;AAEgB,cAAXA,WAAW,GAAG;AACd,cAAIC,MAAM,GAAG;AACTC,YAAAA,MAAM,EAAE,MADC;AAETC,YAAAA,GAAG,EAAE,8CAFI;AAGTC,YAAAA,OAAO,EAAE;AACP,4BAAc,mCADP;AAEP,+BAAkB,UAAS;AAAA;AAAA,4CAAWC,KAAM;AAFrC,aAHA;AAOTC,YAAAA,MAAM,EAAE;AACNC,cAAAA,IAAI,EAAE,YADA,CAEN;;AAFM;AAPC,WAAb;AAaA,gBAAMC,QAAQ,GAAG,MAAOC,MAAM,CAACC,KAAR,CAAsBT,MAAtB,CAAvB;AACA,eAAKV,UAAL,CAAgBoB,aAAhB,CAA8BH,QAAQ,CAACI,IAAT,CAAcC,cAA5C,EAA4DL,QAAQ,CAACI,IAAT,CAAcE,SAA1E;AACA;AAAA;AAAA,wCAAWC,QAAX,GAAsBP,QAAtB,CAhBc,CAiBd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAED;;AApD4C,O","sourcesContent":["import { _decorator, Component, Node } from \"cc\";\nimport GlobalData from \"../home/GloabalClass\";\nimport { basePageView } from \"../common/basePageView\";\nimport { basePageModel } from \"../common/basePageModel\";\nimport { inviteView } from \"./inviteView\";\nimport { earnView } from \"../earn/earnView\";\nconst { ccclass, property } = _decorator;\n\nexport const taskUrls = {\n  SearchTask: \"https://api.infinitytest.cc/api/v1/task/list\",\n  ClaimReward: \"https://api.infinitytest.cc/api/v1/task/claim\",\n  CompleteTask: \"https://api.infinitytest.cc/api/v1/task/complete\",\n  CheckIn: \"https://api.infinitytest.cc/api/v1/task/checkIn\",\n};\n\nexport interface taskListResponseType {\n    \n        data:{\n            code: string;\n            data: {\n              checkInList: {\n                checkInNo: string;\n                date: string;\n                point: number;\n                status: number;\n              }[];\n              gamePoint: number;\n              taskModelResponses: {\n                taskResponseList: {\n                  buttonText: string;\n                  icon: string;\n                  remark: string;\n                  showMsg: string;\n                  taskDesc: string;\n                  taskId: number;\n                  taskLink: string;\n                  taskName: string;\n                  taskReward: number;\n                  taskType: number;\n                  value1: number;\n                  value2: string;\n                  status: number\n                }[];\n                taskModelId: number;\n                taskModelName: string;\n                taskType: string;\n              }[];\n              totalInviteNum: number;\n              totalPoint: number;\n              twitterUserName: string;\n            };\n            message: string;\n        }\n}\n\n@ccclass(\"inviteModel\")\nexport class inviteModel extends basePageModel {\n    invitePage: inviteView\n    earnPage: earnView\n    inviteCode: any;\n  start() {\n    this.invitePage = this.view.getComponent(inviteView)\n  }\n\n  update(deltaTime: number) {}\n\n  async initData(){\n    this.inviteCode = GlobalData.inviteCode\n    await this.getTaskList()\n  }\n\n  async getTaskList() {\n        var config = {\n            method: 'post',\n            url: 'https://api.infinitytest.cc/api/v1/task/list',\n            headers: { \n              'User-Agent': 'Apifox/1.0.0 (https://apifox.com)', \n              'Authorization': `Bearer ${GlobalData.token}`\n            },\n            params: {\n              page: 'GAME_LOBBY',\n              // 添加更多参数\n            }\n          };\n        \n        const taskList = await (window.axios as any)(config)\n        this.invitePage.setInviteInfo(taskList.data.totalInviteNum, taskList.data.gamePoint)\n        GlobalData.taskData = taskList\n        // .then(function (taskList: taskListResponseType) {\n        //    this.invitePage.setInviteInfo(taskList.data.totalInviteNum, taskList.data.gamePoint)\n        //    GlobalData.taskData = taskList\n        //    cb(taskList)\n        // })\n        // .catch(function (error) {\n        //    console.log(error);\n        // });\n\n    //   const taskList = await window.axios.post<taskListResponseType>(\n    //     taskUrls.SearchTask,\n    //     {\n    //         page: 'GAME_LOBBY',\n    //     },{\n    //         headers: { \n    //               'Authorization': `Bearer ${GlobalData.token}`\n    //         }\n    //     }\n    //   );\n\n  }\n}\n"]}