{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/OverCtl.ts"],"names":["_decorator","Component","Label","EventDispatcher","GameData","ccclass","property","OverCtl","type","start","get_instance","target","on","SHOW_OVER_WINDOW","show","node","active","scheduleOnce","setPosition","total_score","string","get_total_score","histroy","localStorage","getItem","history_score","update","deltaTime","restart","emit","START_GAME"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,K,OAAAA,K;;AAC7BC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAC9B;AACA;AACA;AACA;AACA;;yBAEaO,O,WADZF,OAAO,CAAC,SAAD,C,UAGHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,UAGRI,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,2BANb,MACaK,OADb,SAC6BN,SAD7B,CACuC;AAAA;AAAA;;AACnC;AADmC;;AAInC;AAJmC;AAAA;;AAQnCQ,QAAAA,KAAK,GAAG;AACJ;AACA;AAAA;AAAA,kDAAgBC,YAAhB,GAA+BC,MAA/B,CAAsCC,EAAtC,CAAyC;AAAA;AAAA,kDAAgBC,gBAAzD,EAA2E,KAAKC,IAAhF,EAAsF,IAAtF;AACA,eAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;AAED;AACJ;AACA;;;AACIF,QAAAA,IAAI,GAAS;AACT,eAAKG,YAAL,CAAkB,MAAM;AACpB,iBAAKF,IAAL,CAAUG,WAAV,CAAsB,CAAtB,EAAyB,CAAzB;AACA,iBAAKH,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,iBAAKG,WAAL,CAAiBC,MAAjB,GAA0B;AAAA;AAAA,sCAASC,eAAT,KAA6B,EAAvD;AACA,gBAAIC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAd;;AACA,gBAAI,CAACF,OAAL,EAAc;AACVA,cAAAA,OAAO,GAAG,GAAV;AACH;;AACD,iBAAKG,aAAL,CAAmBL,MAAnB,GAA4BE,OAA5B;AACH,WATD,EASE,GATF;AAWH;;AAEDI,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;AACD;AACJ;AACA;;;AACIC,QAAAA,OAAO,GAAG;AACN;AACA,eAAKb,IAAL,CAAUG,WAAV,CAAsB,CAAC,IAAvB,EAA6B,CAA7B;AACA,eAAKH,IAAL,CAAUC,MAAV,GAAmB,KAAnB,CAHM,CAIN;;AACA;AAAA;AAAA,kDAAgBN,YAAhB,GAA+BC,MAA/B,CAAsCkB,IAAtC,CAA2C;AAAA;AAAA,kDAAgBC,UAA3D;AACH;;AA3CkC,O;;;;;iBAGd,I;;;;;;;iBAGE,I","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\nimport { EventDispatcher } from './EventDispatcher';\nimport { GameData } from './GameData';\nconst { ccclass, property } = _decorator;\n/**\n * 游戏结束界面,脚本\n * @author 一朵毛山\n * Construct \n */\n@ccclass('OverCtl')\nexport class OverCtl extends Component {\n    //本局分数\n    @property({ type: Label })\n    total_score: Label = null;\n    //历史最高分\n    @property({ type: Label })\n    history_score: Label = null;\n\n    start() {\n        //注册打开游戏结束界面事件\n        EventDispatcher.get_instance().target.on(EventDispatcher.SHOW_OVER_WINDOW, this.show, this);\n        this.node.active = false;\n    }\n\n    /**\n     * 显示游戏结束界面\n     */\n    show(): void {\n        this.scheduleOnce(() => {\n            this.node.setPosition(0, 0);\n            this.node.active = true;\n            this.total_score.string = GameData.get_total_score() + \"\";\n            let histroy = localStorage.getItem(\"history_score\");\n            if (!histroy) {\n                histroy = \"0\";\n            }\n            this.history_score.string = histroy;\n        },0.5);\n\n    }\n\n    update(deltaTime: number) {\n\n    }\n    /**\n     * 重新开始游戏\n     */\n    restart() {\n        //隐藏该界面\n        this.node.setPosition(-1000, 0);\n        this.node.active = false;\n        //发送游戏开始事件\n        EventDispatcher.get_instance().target.emit(EventDispatcher.START_GAME);\n    }\n}\n\n"]}