{"version":3,"sources":["file:///Users/feiwang/tg_cocos/NewProject_4/assets/resources/scripts/HeroColliderCtl.ts"],"names":["_decorator","Component","CircleCollider2D","Contact2DType","PolygonCollider2D","ccclass","property","HeroColliderCtl","step_score","collider_node","start","node","getComponent","on","BEGIN_CONTACT","on_begin_contact","hero_collier","box_collier","tag","parent","reset_data","get_step_score","get_collider_node","update","deltaTime"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,gB,OAAAA,gB;AAAkBC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,iB,OAAAA,iB;;;;;;;;;OACjE;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;AAE9B;AACA;AACA;AACA;AACA;;iCAEaO,e,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,eADb,SACqCN,SADrC,CAC+C;AAAA;AAAA;AAC3C;AAD2C,eAEnCO,UAFmC,GAEf,CAFe;AAG3C;AAH2C,eAInCC,aAJmC,GAId,IAJc;AAAA;;AAM3CC,QAAAA,KAAK,GAAG;AAAA;;AACJ;AACA,wCAAKC,IAAL,CAAUC,YAAV,CAAuBV,gBAAvB,4CAA0CW,EAA1C,CAA6CV,aAAa,CAACW,aAA3D,EAAyE,KAAKC,gBAA9E,EAA+F,IAA/F,EAFI,CAGJ;;AACA,yCAAKJ,IAAL,CAAUC,YAAV,CAAuBR,iBAAvB,6CAA2CS,EAA3C,CAA8CV,aAAa,CAACW,aAA5D,EAA0E,KAAKC,gBAA/E,EAAgG,IAAhG;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACIA,QAAAA,gBAAgB,CAACC,YAAD,EAAyBC,WAAzB,EAAgD;AAC5D,cAAGD,YAAY,CAACE,GAAb,IAAoB,CAApB,IAAyBD,WAAW,CAACC,GAAZ,IAAmB,EAA/C,EAAkD;AAC9C,iBAAKV,UAAL,GAAkB,CAAlB;AACH,WAFD,MAEM,IAAGQ,YAAY,CAACE,GAAb,IAAoB,CAApB,IAAyBD,WAAW,CAACC,GAAZ,IAAmB,EAA/C,EAAkD;AACrD,gBAAG,KAAKV,UAAL,GAAgB,CAAnB,EAAqB;AAChB,mBAAKA,UAAL,GAAkB,CAAlB;AACJ;AACH,WAJK,MAIA,IAAGQ,YAAY,CAACE,GAAb,IAAoB,CAApB,IAAyBD,WAAW,CAACC,GAAZ,IAAmB,EAA/C,EAAkD;AACpD,gBAAG,KAAKV,UAAL,IAAmB,CAAtB,EAAwB;AACpB,mBAAKA,UAAL,GAAkB,CAAC,CAAnB;AACH;AACJ;;AACD,eAAKC,aAAL,GAAqBQ,WAAW,CAACN,IAAZ,CAAiBQ,MAAtC;AACH;AAED;AACJ;AACA;;;AACIC,QAAAA,UAAU,GAAE;AACR,eAAKZ,UAAL,GAAkB,CAAlB;AACA,eAAKC,aAAL,GAAqB,IAArB;AACH;AAED;AACJ;AACA;AACA;;;AACIY,QAAAA,cAAc,GAAS;AACnB,iBAAO,KAAKb,UAAZ;AACH;AAED;AACJ;AACA;AACA;;;AACIc,QAAAA,iBAAiB,GAAO;AACpB,iBAAO,KAAKb,aAAZ;AACH;;AAGDc,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AA5D0C,O","sourcesContent":["import { _decorator, Component, Node, CircleCollider2D, Contact2DType, PolygonCollider2D, Collider2D } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * 英雄的碰撞体脚本\n * @author 一朵毛山\n * Construct \n */\n@ccclass('HeroColliderCtl')\nexport class HeroColliderCtl extends Component {\n    //0=踏空,1=分,2=分, -1=滑倒\n    private step_score:number = 0;\n    //碰撞发生的箱子node\n    private collider_node:Node = null;\n\n    start() {\n        //注册碰撞事件\n        this.node.getComponent(CircleCollider2D)?.on(Contact2DType.BEGIN_CONTACT,this.on_begin_contact,this);\n        //注册碰撞事件\n        this.node.getComponent(PolygonCollider2D)?.on(Contact2DType.BEGIN_CONTACT,this.on_begin_contact,this);\n    }\n\n    /**\n     * 碰撞回调,用于处理碰撞后的逻辑\n     * @param hero_collier \n     * @param box_collier \n     */\n    on_begin_contact(hero_collier:Collider2D,box_collier:Collider2D){\n        if(hero_collier.tag == 1 && box_collier.tag == 11){\n            this.step_score = 2;\n        }else if(hero_collier.tag == 1 && box_collier.tag == 12){\n           if(this.step_score<1){\n                this.step_score = 1;\n           }     \n        }else if(hero_collier.tag == 2 && box_collier.tag == 12){\n            if(this.step_score == 0){\n                this.step_score = -1;\n            }\n        }\n        this.collider_node = box_collier.node.parent;\n    }\n\n    /**\n     * 重置数据,每次跳跃时候调用\n     */\n    reset_data(){\n        this.step_score = 0;\n        this.collider_node = null;\n    }\n\n    /**\n     * 获取本次跳跃得分\n     * @returns \n     */\n    get_step_score():number{\n        return this.step_score;\n    }\n\n    /**\n     * 获取本次跳跃发生碰撞的node\n     * @returns \n     */\n    get_collider_node():Node{\n        return this.collider_node;\n    }\n\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n"]}