{"version":3,"sources":["file:///Users/feiwang/NewProject_4/assets/resources/scripts/GameData.ts"],"names":["GameData","_decorator","ccclass","property","get_game_state","game_state","set_game_state","value","reset_data","total_score","step_score","computed_step_score","score","record_history_score","history_score","localStorage","getItem","setItem","hs","Number","get_total_score"],"mappings":";;;8EAOaA,Q;;;;;;;;;AAPJC,MAAAA,U,OAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBF,U;AAC9B;AACA;AACA;AACA;AACA;;0BACaD,Q,GAAN,MAAMA,QAAN,CAAc;AACjB;AAEA;AAEA;;AAGA;AACJ;AACA;AACA;AACgC,eAAdI,cAAc,GAAS;AACjC,iBAAOJ,QAAQ,CAACK,UAAhB;AACH;AAED;AACJ;AACA;AACA;;;AACgC,eAAdC,cAAc,CAACC,KAAD,EAAc;AACtCP,UAAAA,QAAQ,CAACK,UAAT,GAAsBE,KAAtB;AACH;AAED;AACJ;AACA;;;AAC4B,eAAVC,UAAU,GAAE;AACtBR,UAAAA,QAAQ,CAACK,UAAT,GAAsB,CAAtB;AACAL,UAAAA,QAAQ,CAACS,WAAT,GAAuB,CAAvB;AACAT,UAAAA,QAAQ,CAACU,UAAT,GAAsB,CAAtB;AACH;AAED;AACJ;AACA;AACA;AACA;;;AACqC,eAAnBC,mBAAmB,CAACC,KAAD,EAAqB;AAClD;AACA,cAAGA,KAAK,IAAG,CAAR,IAAaA,KAAK,IAAI,CAAC,CAA1B,EAA4B;AACxBZ,YAAAA,QAAQ,CAACU,UAAT,GAAsB,CAAtB;AACA,mBAAOE,KAAP;AACH;;AACD,cAAGA,KAAK,IAAI,CAAZ,EAAc;AACVZ,YAAAA,QAAQ,CAACU,UAAT,GAAsB,CAAtB;AACAV,YAAAA,QAAQ,CAACS,WAAT,IAAuBG,KAAvB;AACA,mBAAOA,KAAP;AACH;;AACD,cAAGZ,QAAQ,CAACU,UAAT,IAAsB,CAAzB,EAA2B;AACvBV,YAAAA,QAAQ,CAACU,UAAT,GAAsB,CAAtB;AACH;;AACDV,UAAAA,QAAQ,CAACU,UAAT,GAAsBV,QAAQ,CAACU,UAAT,GAAoBE,KAA1C;AACAZ,UAAAA,QAAQ,CAACS,WAAT,IAAuBT,QAAQ,CAACU,UAAhC;AAGA,iBAAOV,QAAQ,CAACU,UAAhB;AACH;;AAEiC,eAApBG,oBAAoB,GAAE;AAChC,cAAGb,QAAQ,CAACS,WAAT,GAAqB,CAAxB,EAA0B;AACtB,gBAAIK,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAApB;;AACA,gBAAG,CAACF,aAAJ,EAAkB;AACdC,cAAAA,YAAY,CAACE,OAAb,CAAqB,eAArB,EAAqCjB,QAAQ,CAACS,WAAT,GAAqB,EAA1D;AACH,aAFD,MAEK;AACD,kBAAIS,EAAS,GAAGC,MAAM,CAACL,aAAD,CAAtB;;AACA,kBAAGI,EAAE,GAAClB,QAAQ,CAACS,WAAf,EAA2B;AACvBM,gBAAAA,YAAY,CAACE,OAAb,CAAqB,eAArB,EAAqCjB,QAAQ,CAACS,WAAT,GAAqB,EAA1D;AACH;AACJ;AACJ;AACJ;AAID;AACJ;AACA;AACA;;;AACiC,eAAfW,eAAe,GAAS;AAClC,iBAAOpB,QAAQ,CAACS,WAAhB;AACH;;AAjFgB,O;;AAART,MAAAA,Q,CAEMK,U,GAAoB,C;AAF1BL,MAAAA,Q,CAIMS,W,GAAqB,C;AAJ3BT,MAAAA,Q,CAMMU,U,GAAoB,C","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n/**\n * 游戏数据\n * @author 一朵毛山\n * Construct \n */\nexport class GameData{\n    //0=没开始,1=游戏中,2=按下,3=弹起状态,4=游戏结束\n    private static game_state:number = 0;\n    //本局得分\n    private static total_score:number = 0;\n    //每次跳跃得分\n    private static step_score:number = 0;\n\n    /**\n     * 获取游戏状态\n     * @returns \n     */\n    public static get_game_state():number{\n        return GameData.game_state;\n    }\n\n    /**\n     * 设置游戏状态\n     * @param value \n     */\n    public static set_game_state(value:number){\n        GameData.game_state = value;\n    }\n\n    /**\n     * 重置数据,每次开始游戏调用\n     */\n    public static reset_data(){\n        GameData.game_state = 0;\n        GameData.total_score = 0;\n        GameData.step_score = 0;\n    }\n\n    /**\n     * 计算最终得分,最终得分要根据上一步得分来计算(step_score*2)\n     * @param score \n     * @returns \n     */\n    public static computed_step_score(score:number):number{\n        // 0 ,-1,1,2\n        if(score ==0 || score == -1){\n            GameData.step_score = 0;\n            return score;\n        }\n        if(score == 1){\n            GameData.step_score = 1;\n            GameData.total_score +=score;\n            return score;\n        }\n        if(GameData.step_score ==0){\n            GameData.step_score = 1;\n        }\n        GameData.step_score = GameData.step_score*score;\n        GameData.total_score +=GameData.step_score;\n\n\n        return GameData.step_score;\n    }\n\n    public static record_history_score(){\n        if(GameData.total_score>0){\n            let history_score = localStorage.getItem(\"history_score\");\n            if(!history_score){\n                localStorage.setItem(\"history_score\",GameData.total_score+\"\");\n            }else{\n                let hs:number = Number(history_score);\n                if(hs<GameData.total_score){\n                    localStorage.setItem(\"history_score\",GameData.total_score+\"\");\n                }\n            }\n        }\n    }\n\n\n\n    /**\n     * 获取本局总分数\n     * @returns \n     */\n    public static get_total_score():number{\n        return GameData.total_score;\n    }\n\n}\n\n"]}